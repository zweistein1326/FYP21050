{"ast":null,"code":"/* asn1-1.0.13.js (c) 2013-2017 Kenji Urushima | kjur.github.com/jsrsasign/license\n */\n\n/*\n * asn1.js - ASN.1 DER encoder classes\n *\n * Copyright (c) 2013-2017 Kenji Urushima (kenji.urushima@gmail.com)\n *\n * This software is licensed under the terms of the MIT License.\n * https://kjur.github.io/jsrsasign/license\n *\n * The above copyright and license notice shall be\n * included in all copies or substantial portions of the Software.\n */\nimport { BigInteger } from \"../jsbn/jsbn\";\nimport { YAHOO } from \"./yahoo\";\n/**\n * @fileOverview\n * @name asn1-1.0.js\n * @author Kenji Urushima kenji.urushima@gmail.com\n * @version asn1 1.0.13 (2017-Jun-02)\n * @since jsrsasign 2.1\n * @license <a href=\"https://kjur.github.io/jsrsasign/license/\">MIT License</a>\n */\n\n/**\n * kjur's class library name space\n * <p>\n * This name space provides following name spaces:\n * <ul>\n * <li>{@link KJUR.asn1} - ASN.1 primitive hexadecimal encoder</li>\n * <li>{@link KJUR.asn1.x509} - ASN.1 structure for X.509 certificate and CRL</li>\n * <li>{@link KJUR.crypto} - Java Cryptographic Extension(JCE) style MessageDigest/Signature\n * class and utilities</li>\n * </ul>\n * </p>\n * NOTE: Please ignore method summary and document of this namespace. This caused by a bug of jsdoc2.\n * @name KJUR\n * @namespace kjur's class library name space\n */\n\nexport var KJUR = {};\n/**\n * kjur's ASN.1 class library name space\n * <p>\n * This is ITU-T X.690 ASN.1 DER encoder class library and\n * class structure and methods is very similar to\n * org.bouncycastle.asn1 package of\n * well known BouncyCaslte Cryptography Library.\n * <h4>PROVIDING ASN.1 PRIMITIVES</h4>\n * Here are ASN.1 DER primitive classes.\n * <ul>\n * <li>0x01 {@link KJUR.asn1.DERBoolean}</li>\n * <li>0x02 {@link KJUR.asn1.DERInteger}</li>\n * <li>0x03 {@link KJUR.asn1.DERBitString}</li>\n * <li>0x04 {@link KJUR.asn1.DEROctetString}</li>\n * <li>0x05 {@link KJUR.asn1.DERNull}</li>\n * <li>0x06 {@link KJUR.asn1.DERObjectIdentifier}</li>\n * <li>0x0a {@link KJUR.asn1.DEREnumerated}</li>\n * <li>0x0c {@link KJUR.asn1.DERUTF8String}</li>\n * <li>0x12 {@link KJUR.asn1.DERNumericString}</li>\n * <li>0x13 {@link KJUR.asn1.DERPrintableString}</li>\n * <li>0x14 {@link KJUR.asn1.DERTeletexString}</li>\n * <li>0x16 {@link KJUR.asn1.DERIA5String}</li>\n * <li>0x17 {@link KJUR.asn1.DERUTCTime}</li>\n * <li>0x18 {@link KJUR.asn1.DERGeneralizedTime}</li>\n * <li>0x30 {@link KJUR.asn1.DERSequence}</li>\n * <li>0x31 {@link KJUR.asn1.DERSet}</li>\n * </ul>\n * <h4>OTHER ASN.1 CLASSES</h4>\n * <ul>\n * <li>{@link KJUR.asn1.ASN1Object}</li>\n * <li>{@link KJUR.asn1.DERAbstractString}</li>\n * <li>{@link KJUR.asn1.DERAbstractTime}</li>\n * <li>{@link KJUR.asn1.DERAbstractStructured}</li>\n * <li>{@link KJUR.asn1.DERTaggedObject}</li>\n * </ul>\n * <h4>SUB NAME SPACES</h4>\n * <ul>\n * <li>{@link KJUR.asn1.cades} - CAdES long term signature format</li>\n * <li>{@link KJUR.asn1.cms} - Cryptographic Message Syntax</li>\n * <li>{@link KJUR.asn1.csr} - Certificate Signing Request (CSR/PKCS#10)</li>\n * <li>{@link KJUR.asn1.tsp} - RFC 3161 Timestamping Protocol Format</li>\n * <li>{@link KJUR.asn1.x509} - RFC 5280 X.509 certificate and CRL</li>\n * </ul>\n * </p>\n * NOTE: Please ignore method summary and document of this namespace.\n * This caused by a bug of jsdoc2.\n * @name KJUR.asn1\n * @namespace\n */\n\nif (typeof KJUR.asn1 == \"undefined\" || !KJUR.asn1) KJUR.asn1 = {};\n/**\n * ASN1 utilities class\n * @name KJUR.asn1.ASN1Util\n * @class ASN1 utilities class\n * @since asn1 1.0.2\n */\n\nKJUR.asn1.ASN1Util = new function () {\n  this.integerToByteHex = function (i) {\n    var h = i.toString(16);\n    if (h.length % 2 == 1) h = '0' + h;\n    return h;\n  };\n\n  this.bigIntToMinTwosComplementsHex = function (bigIntegerValue) {\n    var h = bigIntegerValue.toString(16);\n\n    if (h.substr(0, 1) != '-') {\n      if (h.length % 2 == 1) {\n        h = '0' + h;\n      } else {\n        if (!h.match(/^[0-7]/)) {\n          h = '00' + h;\n        }\n      }\n    } else {\n      var hPos = h.substr(1);\n      var xorLen = hPos.length;\n\n      if (xorLen % 2 == 1) {\n        xorLen += 1;\n      } else {\n        if (!h.match(/^[0-7]/)) {\n          xorLen += 2;\n        }\n      }\n\n      var hMask = '';\n\n      for (var i = 0; i < xorLen; i++) {\n        hMask += 'f';\n      }\n\n      var biMask = new BigInteger(hMask, 16);\n      var biNeg = biMask.xor(bigIntegerValue).add(BigInteger.ONE);\n      h = biNeg.toString(16).replace(/^-/, '');\n    }\n\n    return h;\n  };\n  /**\n   * get PEM string from hexadecimal data and header string\n   * @name getPEMStringFromHex\n   * @memberOf KJUR.asn1.ASN1Util\n   * @function\n   * @param {String} dataHex hexadecimal string of PEM body\n   * @param {String} pemHeader PEM header string (ex. 'RSA PRIVATE KEY')\n   * @return {String} PEM formatted string of input data\n   * @description\n   * This method converts a hexadecimal string to a PEM string with\n   * a specified header. Its line break will be CRLF(\"\\r\\n\").\n   * @example\n   * var pem  = KJUR.asn1.ASN1Util.getPEMStringFromHex('616161', 'RSA PRIVATE KEY');\n   * // value of pem will be:\n   * -----BEGIN PRIVATE KEY-----\n   * YWFh\n   * -----END PRIVATE KEY-----\n   */\n\n\n  this.getPEMStringFromHex = function (dataHex, pemHeader) {\n    return hextopem(dataHex, pemHeader);\n  };\n  /**\n   * generate ASN1Object specifed by JSON parameters\n   * @name newObject\n   * @memberOf KJUR.asn1.ASN1Util\n   * @function\n   * @param {Array} param JSON parameter to generate ASN1Object\n   * @return {KJUR.asn1.ASN1Object} generated object\n   * @since asn1 1.0.3\n   * @description\n   * generate any ASN1Object specified by JSON param\n   * including ASN.1 primitive or structured.\n   * Generally 'param' can be described as follows:\n   * <blockquote>\n   * {TYPE-OF-ASNOBJ: ASN1OBJ-PARAMETER}\n   * </blockquote>\n   * 'TYPE-OF-ASN1OBJ' can be one of following symbols:\n   * <ul>\n   * <li>'bool' - DERBoolean</li>\n   * <li>'int' - DERInteger</li>\n   * <li>'bitstr' - DERBitString</li>\n   * <li>'octstr' - DEROctetString</li>\n   * <li>'null' - DERNull</li>\n   * <li>'oid' - DERObjectIdentifier</li>\n   * <li>'enum' - DEREnumerated</li>\n   * <li>'utf8str' - DERUTF8String</li>\n   * <li>'numstr' - DERNumericString</li>\n   * <li>'prnstr' - DERPrintableString</li>\n   * <li>'telstr' - DERTeletexString</li>\n   * <li>'ia5str' - DERIA5String</li>\n   * <li>'utctime' - DERUTCTime</li>\n   * <li>'gentime' - DERGeneralizedTime</li>\n   * <li>'seq' - DERSequence</li>\n   * <li>'set' - DERSet</li>\n   * <li>'tag' - DERTaggedObject</li>\n   * </ul>\n   * @example\n   * newObject({'prnstr': 'aaa'});\n   * newObject({'seq': [{'int': 3}, {'prnstr': 'aaa'}]})\n   * // ASN.1 Tagged Object\n   * newObject({'tag': {'tag': 'a1',\n   *                    'explicit': true,\n   *                    'obj': {'seq': [{'int': 3}, {'prnstr': 'aaa'}]}}});\n   * // more simple representation of ASN.1 Tagged Object\n   * newObject({'tag': ['a1',\n   *                    true,\n   *                    {'seq': [\n   *                      {'int': 3},\n   *                      {'prnstr': 'aaa'}]}\n   *                   ]});\n   */\n\n\n  this.newObject = function (param) {\n    var _KJUR = KJUR,\n        _KJUR_asn1 = _KJUR.asn1,\n        _DERBoolean = _KJUR_asn1.DERBoolean,\n        _DERInteger = _KJUR_asn1.DERInteger,\n        _DERBitString = _KJUR_asn1.DERBitString,\n        _DEROctetString = _KJUR_asn1.DEROctetString,\n        _DERNull = _KJUR_asn1.DERNull,\n        _DERObjectIdentifier = _KJUR_asn1.DERObjectIdentifier,\n        _DEREnumerated = _KJUR_asn1.DEREnumerated,\n        _DERUTF8String = _KJUR_asn1.DERUTF8String,\n        _DERNumericString = _KJUR_asn1.DERNumericString,\n        _DERPrintableString = _KJUR_asn1.DERPrintableString,\n        _DERTeletexString = _KJUR_asn1.DERTeletexString,\n        _DERIA5String = _KJUR_asn1.DERIA5String,\n        _DERUTCTime = _KJUR_asn1.DERUTCTime,\n        _DERGeneralizedTime = _KJUR_asn1.DERGeneralizedTime,\n        _DERSequence = _KJUR_asn1.DERSequence,\n        _DERSet = _KJUR_asn1.DERSet,\n        _DERTaggedObject = _KJUR_asn1.DERTaggedObject,\n        _newObject = _KJUR_asn1.ASN1Util.newObject;\n    var keys = Object.keys(param);\n    if (keys.length != 1) throw \"key of param shall be only one.\";\n    var key = keys[0];\n    if (\":bool:int:bitstr:octstr:null:oid:enum:utf8str:numstr:prnstr:telstr:ia5str:utctime:gentime:seq:set:tag:\".indexOf(\":\" + key + \":\") == -1) throw \"undefined key: \" + key;\n    if (key == \"bool\") return new _DERBoolean(param[key]);\n    if (key == \"int\") return new _DERInteger(param[key]);\n    if (key == \"bitstr\") return new _DERBitString(param[key]);\n    if (key == \"octstr\") return new _DEROctetString(param[key]);\n    if (key == \"null\") return new _DERNull(param[key]);\n    if (key == \"oid\") return new _DERObjectIdentifier(param[key]);\n    if (key == \"enum\") return new _DEREnumerated(param[key]);\n    if (key == \"utf8str\") return new _DERUTF8String(param[key]);\n    if (key == \"numstr\") return new _DERNumericString(param[key]);\n    if (key == \"prnstr\") return new _DERPrintableString(param[key]);\n    if (key == \"telstr\") return new _DERTeletexString(param[key]);\n    if (key == \"ia5str\") return new _DERIA5String(param[key]);\n    if (key == \"utctime\") return new _DERUTCTime(param[key]);\n    if (key == \"gentime\") return new _DERGeneralizedTime(param[key]);\n\n    if (key == \"seq\") {\n      var paramList = param[key];\n      var a = [];\n\n      for (var i = 0; i < paramList.length; i++) {\n        var asn1Obj = _newObject(paramList[i]);\n\n        a.push(asn1Obj);\n      }\n\n      return new _DERSequence({\n        'array': a\n      });\n    }\n\n    if (key == \"set\") {\n      var paramList = param[key];\n      var a = [];\n\n      for (var i = 0; i < paramList.length; i++) {\n        var asn1Obj = _newObject(paramList[i]);\n\n        a.push(asn1Obj);\n      }\n\n      return new _DERSet({\n        'array': a\n      });\n    }\n\n    if (key == \"tag\") {\n      var tagParam = param[key];\n\n      if (Object.prototype.toString.call(tagParam) === '[object Array]' && tagParam.length == 3) {\n        var obj = _newObject(tagParam[2]);\n\n        return new _DERTaggedObject({\n          tag: tagParam[0],\n          explicit: tagParam[1],\n          obj: obj\n        });\n      } else {\n        var newParam = {};\n        if (tagParam.explicit !== undefined) newParam.explicit = tagParam.explicit;\n        if (tagParam.tag !== undefined) newParam.tag = tagParam.tag;\n        if (tagParam.obj === undefined) throw \"obj shall be specified for 'tag'.\";\n        newParam.obj = _newObject(tagParam.obj);\n        return new _DERTaggedObject(newParam);\n      }\n    }\n  };\n  /**\n   * get encoded hexadecimal string of ASN1Object specifed by JSON parameters\n   * @name jsonToASN1HEX\n   * @memberOf KJUR.asn1.ASN1Util\n   * @function\n   * @param {Array} param JSON parameter to generate ASN1Object\n   * @return hexadecimal string of ASN1Object\n   * @since asn1 1.0.4\n   * @description\n   * As for ASN.1 object representation of JSON object,\n   * please see {@link newObject}.\n   * @example\n   * jsonToASN1HEX({'prnstr': 'aaa'});\n   */\n\n\n  this.jsonToASN1HEX = function (param) {\n    var asn1Obj = this.newObject(param);\n    return asn1Obj.getEncodedHex();\n  };\n}();\n/**\n * get dot noted oid number string from hexadecimal value of OID\n * @name oidHexToInt\n * @memberOf KJUR.asn1.ASN1Util\n * @function\n * @param {String} hex hexadecimal value of object identifier\n * @return {String} dot noted string of object identifier\n * @since jsrsasign 4.8.3 asn1 1.0.7\n * @description\n * This static method converts from hexadecimal string representation of\n * ASN.1 value of object identifier to oid number string.\n * @example\n * KJUR.asn1.ASN1Util.oidHexToInt('550406') &rarr; \"2.5.4.6\"\n */\n\nKJUR.asn1.ASN1Util.oidHexToInt = function (hex) {\n  var s = \"\";\n  var i01 = parseInt(hex.substr(0, 2), 16);\n  var i0 = Math.floor(i01 / 40);\n  var i1 = i01 % 40;\n  var s = i0 + \".\" + i1;\n  var binbuf = \"\";\n\n  for (var i = 2; i < hex.length; i += 2) {\n    var value = parseInt(hex.substr(i, 2), 16);\n    var bin = (\"00000000\" + value.toString(2)).slice(-8);\n    binbuf = binbuf + bin.substr(1, 7);\n\n    if (bin.substr(0, 1) == \"0\") {\n      var bi = new BigInteger(binbuf, 2);\n      s = s + \".\" + bi.toString(10);\n      binbuf = \"\";\n    }\n  }\n\n  ;\n  return s;\n};\n/**\n * get hexadecimal value of object identifier from dot noted oid value\n * @name oidIntToHex\n * @memberOf KJUR.asn1.ASN1Util\n * @function\n * @param {String} oidString dot noted string of object identifier\n * @return {String} hexadecimal value of object identifier\n * @since jsrsasign 4.8.3 asn1 1.0.7\n * @description\n * This static method converts from object identifier value string.\n * to hexadecimal string representation of it.\n * @example\n * KJUR.asn1.ASN1Util.oidIntToHex(\"2.5.4.6\") &rarr; \"550406\"\n */\n\n\nKJUR.asn1.ASN1Util.oidIntToHex = function (oidString) {\n  var itox = function (i) {\n    var h = i.toString(16);\n    if (h.length == 1) h = '0' + h;\n    return h;\n  };\n\n  var roidtox = function (roid) {\n    var h = '';\n    var bi = new BigInteger(roid, 10);\n    var b = bi.toString(2);\n    var padLen = 7 - b.length % 7;\n    if (padLen == 7) padLen = 0;\n    var bPad = '';\n\n    for (var i = 0; i < padLen; i++) bPad += '0';\n\n    b = bPad + b;\n\n    for (var i = 0; i < b.length - 1; i += 7) {\n      var b8 = b.substr(i, 7);\n      if (i != b.length - 7) b8 = '1' + b8;\n      h += itox(parseInt(b8, 2));\n    }\n\n    return h;\n  };\n\n  if (!oidString.match(/^[0-9.]+$/)) {\n    throw \"malformed oid string: \" + oidString;\n  }\n\n  var h = '';\n  var a = oidString.split('.');\n  var i0 = parseInt(a[0]) * 40 + parseInt(a[1]);\n  h += itox(i0);\n  a.splice(0, 2);\n\n  for (var i = 0; i < a.length; i++) {\n    h += roidtox(a[i]);\n  }\n\n  return h;\n}; // ********************************************************************\n//  Abstract ASN.1 Classes\n// ********************************************************************\n// ********************************************************************\n\n/**\n * base class for ASN.1 DER encoder object\n * @name KJUR.asn1.ASN1Object\n * @class base class for ASN.1 DER encoder object\n * @property {Boolean} isModified flag whether internal data was changed\n * @property {String} hTLV hexadecimal string of ASN.1 TLV\n * @property {String} hT hexadecimal string of ASN.1 TLV tag(T)\n * @property {String} hL hexadecimal string of ASN.1 TLV length(L)\n * @property {String} hV hexadecimal string of ASN.1 TLV value(V)\n * @description\n */\n\n\nKJUR.asn1.ASN1Object = function () {\n  var isModified = true;\n  var hTLV = null;\n  var hT = '00';\n  var hL = '00';\n  var hV = '';\n  /**\n   * get hexadecimal ASN.1 TLV length(L) bytes from TLV value(V)\n   * @name getLengthHexFromValue\n   * @memberOf KJUR.asn1.ASN1Object#\n   * @function\n   * @return {String} hexadecimal string of ASN.1 TLV length(L)\n   */\n\n  this.getLengthHexFromValue = function () {\n    if (typeof this.hV == \"undefined\" || this.hV == null) {\n      throw \"this.hV is null or undefined.\";\n    }\n\n    if (this.hV.length % 2 == 1) {\n      throw \"value hex must be even length: n=\" + hV.length + \",v=\" + this.hV;\n    }\n\n    var n = this.hV.length / 2;\n    var hN = n.toString(16);\n\n    if (hN.length % 2 == 1) {\n      hN = \"0\" + hN;\n    }\n\n    if (n < 128) {\n      return hN;\n    } else {\n      var hNlen = hN.length / 2;\n\n      if (hNlen > 15) {\n        throw \"ASN.1 length too long to represent by 8x: n = \" + n.toString(16);\n      }\n\n      var head = 128 + hNlen;\n      return head.toString(16) + hN;\n    }\n  };\n  /**\n   * get hexadecimal string of ASN.1 TLV bytes\n   * @name getEncodedHex\n   * @memberOf KJUR.asn1.ASN1Object#\n   * @function\n   * @return {String} hexadecimal string of ASN.1 TLV\n   */\n\n\n  this.getEncodedHex = function () {\n    if (this.hTLV == null || this.isModified) {\n      this.hV = this.getFreshValueHex();\n      this.hL = this.getLengthHexFromValue();\n      this.hTLV = this.hT + this.hL + this.hV;\n      this.isModified = false; //alert(\"first time: \" + this.hTLV);\n    }\n\n    return this.hTLV;\n  };\n  /**\n   * get hexadecimal string of ASN.1 TLV value(V) bytes\n   * @name getValueHex\n   * @memberOf KJUR.asn1.ASN1Object#\n   * @function\n   * @return {String} hexadecimal string of ASN.1 TLV value(V) bytes\n   */\n\n\n  this.getValueHex = function () {\n    this.getEncodedHex();\n    return this.hV;\n  };\n\n  this.getFreshValueHex = function () {\n    return '';\n  };\n}; // == BEGIN DERAbstractString ================================================\n\n/**\n * base class for ASN.1 DER string classes\n * @name KJUR.asn1.DERAbstractString\n * @class base class for ASN.1 DER string classes\n * @param {Array} params associative array of parameters (ex. {'str': 'aaa'})\n * @property {String} s internal string of value\n * @extends KJUR.asn1.ASN1Object\n * @description\n * <br/>\n * As for argument 'params' for constructor, you can specify one of\n * following properties:\n * <ul>\n * <li>str - specify initial ASN.1 value(V) by a string</li>\n * <li>hex - specify initial ASN.1 value(V) by a hexadecimal string</li>\n * </ul>\n * NOTE: 'params' can be omitted.\n */\n\n\nKJUR.asn1.DERAbstractString = function (params) {\n  KJUR.asn1.DERAbstractString.superclass.constructor.call(this);\n  var s = null;\n  var hV = null;\n  /**\n   * get string value of this string object\n   * @name getString\n   * @memberOf KJUR.asn1.DERAbstractString#\n   * @function\n   * @return {String} string value of this string object\n   */\n\n  this.getString = function () {\n    return this.s;\n  };\n  /**\n   * set value by a string\n   * @name setString\n   * @memberOf KJUR.asn1.DERAbstractString#\n   * @function\n   * @param {String} newS value by a string to set\n   */\n\n\n  this.setString = function (newS) {\n    this.hTLV = null;\n    this.isModified = true;\n    this.s = newS;\n    this.hV = stohex(this.s);\n  };\n  /**\n   * set value by a hexadecimal string\n   * @name setStringHex\n   * @memberOf KJUR.asn1.DERAbstractString#\n   * @function\n   * @param {String} newHexString value by a hexadecimal string to set\n   */\n\n\n  this.setStringHex = function (newHexString) {\n    this.hTLV = null;\n    this.isModified = true;\n    this.s = null;\n    this.hV = newHexString;\n  };\n\n  this.getFreshValueHex = function () {\n    return this.hV;\n  };\n\n  if (typeof params != \"undefined\") {\n    if (typeof params == \"string\") {\n      this.setString(params);\n    } else if (typeof params['str'] != \"undefined\") {\n      this.setString(params['str']);\n    } else if (typeof params['hex'] != \"undefined\") {\n      this.setStringHex(params['hex']);\n    }\n  }\n};\n\nYAHOO.lang.extend(KJUR.asn1.DERAbstractString, KJUR.asn1.ASN1Object); // == END   DERAbstractString ================================================\n// == BEGIN DERAbstractTime ==================================================\n\n/**\n * base class for ASN.1 DER Generalized/UTCTime class\n * @name KJUR.asn1.DERAbstractTime\n * @class base class for ASN.1 DER Generalized/UTCTime class\n * @param {Array} params associative array of parameters (ex. {'str': '130430235959Z'})\n * @extends KJUR.asn1.ASN1Object\n * @description\n * @see KJUR.asn1.ASN1Object - superclass\n */\n\nKJUR.asn1.DERAbstractTime = function (params) {\n  KJUR.asn1.DERAbstractTime.superclass.constructor.call(this);\n  var s = null;\n  var date = null; // --- PRIVATE METHODS --------------------\n\n  this.localDateToUTC = function (d) {\n    utc = d.getTime() + d.getTimezoneOffset() * 60000;\n    var utcDate = new Date(utc);\n    return utcDate;\n  };\n  /*\n   * format date string by Data object\n   * @name formatDate\n   * @memberOf KJUR.asn1.AbstractTime;\n   * @param {Date} dateObject\n   * @param {string} type 'utc' or 'gen'\n   * @param {boolean} withMillis flag for with millisections or not\n   * @description\n   * 'withMillis' flag is supported from asn1 1.0.6.\n   */\n\n\n  this.formatDate = function (dateObject, type, withMillis) {\n    var pad = this.zeroPadding;\n    var d = this.localDateToUTC(dateObject);\n    var year = String(d.getFullYear());\n    if (type == 'utc') year = year.substr(2, 2);\n    var month = pad(String(d.getMonth() + 1), 2);\n    var day = pad(String(d.getDate()), 2);\n    var hour = pad(String(d.getHours()), 2);\n    var min = pad(String(d.getMinutes()), 2);\n    var sec = pad(String(d.getSeconds()), 2);\n    var s = year + month + day + hour + min + sec;\n\n    if (withMillis === true) {\n      var millis = d.getMilliseconds();\n\n      if (millis != 0) {\n        var sMillis = pad(String(millis), 3);\n        sMillis = sMillis.replace(/[0]+$/, \"\");\n        s = s + \".\" + sMillis;\n      }\n    }\n\n    return s + \"Z\";\n  };\n\n  this.zeroPadding = function (s, len) {\n    if (s.length >= len) return s;\n    return new Array(len - s.length + 1).join('0') + s;\n  }; // --- PUBLIC METHODS --------------------\n\n  /**\n   * get string value of this string object\n   * @name getString\n   * @memberOf KJUR.asn1.DERAbstractTime#\n   * @function\n   * @return {String} string value of this time object\n   */\n\n\n  this.getString = function () {\n    return this.s;\n  };\n  /**\n   * set value by a string\n   * @name setString\n   * @memberOf KJUR.asn1.DERAbstractTime#\n   * @function\n   * @param {String} newS value by a string to set such like \"130430235959Z\"\n   */\n\n\n  this.setString = function (newS) {\n    this.hTLV = null;\n    this.isModified = true;\n    this.s = newS;\n    this.hV = stohex(newS);\n  };\n  /**\n   * set value by a Date object\n   * @name setByDateValue\n   * @memberOf KJUR.asn1.DERAbstractTime#\n   * @function\n   * @param {Integer} year year of date (ex. 2013)\n   * @param {Integer} month month of date between 1 and 12 (ex. 12)\n   * @param {Integer} day day of month\n   * @param {Integer} hour hours of date\n   * @param {Integer} min minutes of date\n   * @param {Integer} sec seconds of date\n   */\n\n\n  this.setByDateValue = function (year, month, day, hour, min, sec) {\n    var dateObject = new Date(Date.UTC(year, month - 1, day, hour, min, sec, 0));\n    this.setByDate(dateObject);\n  };\n\n  this.getFreshValueHex = function () {\n    return this.hV;\n  };\n};\n\nYAHOO.lang.extend(KJUR.asn1.DERAbstractTime, KJUR.asn1.ASN1Object); // == END   DERAbstractTime ==================================================\n// == BEGIN DERAbstractStructured ============================================\n\n/**\n * base class for ASN.1 DER structured class\n * @name KJUR.asn1.DERAbstractStructured\n * @class base class for ASN.1 DER structured class\n * @property {Array} asn1Array internal array of ASN1Object\n * @extends KJUR.asn1.ASN1Object\n * @description\n * @see KJUR.asn1.ASN1Object - superclass\n */\n\nKJUR.asn1.DERAbstractStructured = function (params) {\n  KJUR.asn1.DERAbstractString.superclass.constructor.call(this);\n  var asn1Array = null;\n  /**\n   * set value by array of ASN1Object\n   * @name setByASN1ObjectArray\n   * @memberOf KJUR.asn1.DERAbstractStructured#\n   * @function\n   * @param {array} asn1ObjectArray array of ASN1Object to set\n   */\n\n  this.setByASN1ObjectArray = function (asn1ObjectArray) {\n    this.hTLV = null;\n    this.isModified = true;\n    this.asn1Array = asn1ObjectArray;\n  };\n  /**\n   * append an ASN1Object to internal array\n   * @name appendASN1Object\n   * @memberOf KJUR.asn1.DERAbstractStructured#\n   * @function\n   * @param {ASN1Object} asn1Object to add\n   */\n\n\n  this.appendASN1Object = function (asn1Object) {\n    this.hTLV = null;\n    this.isModified = true;\n    this.asn1Array.push(asn1Object);\n  };\n\n  this.asn1Array = new Array();\n\n  if (typeof params != \"undefined\") {\n    if (typeof params['array'] != \"undefined\") {\n      this.asn1Array = params['array'];\n    }\n  }\n};\n\nYAHOO.lang.extend(KJUR.asn1.DERAbstractStructured, KJUR.asn1.ASN1Object); // ********************************************************************\n//  ASN.1 Object Classes\n// ********************************************************************\n// ********************************************************************\n\n/**\n * class for ASN.1 DER Boolean\n * @name KJUR.asn1.DERBoolean\n * @class class for ASN.1 DER Boolean\n * @extends KJUR.asn1.ASN1Object\n * @description\n * @see KJUR.asn1.ASN1Object - superclass\n */\n\nKJUR.asn1.DERBoolean = function () {\n  KJUR.asn1.DERBoolean.superclass.constructor.call(this);\n  this.hT = \"01\";\n  this.hTLV = \"0101ff\";\n};\n\nYAHOO.lang.extend(KJUR.asn1.DERBoolean, KJUR.asn1.ASN1Object); // ********************************************************************\n\n/**\n * class for ASN.1 DER Integer\n * @name KJUR.asn1.DERInteger\n * @class class for ASN.1 DER Integer\n * @extends KJUR.asn1.ASN1Object\n * @description\n * <br/>\n * As for argument 'params' for constructor, you can specify one of\n * following properties:\n * <ul>\n * <li>int - specify initial ASN.1 value(V) by integer value</li>\n * <li>bigint - specify initial ASN.1 value(V) by BigInteger object</li>\n * <li>hex - specify initial ASN.1 value(V) by a hexadecimal string</li>\n * </ul>\n * NOTE: 'params' can be omitted.\n */\n\nKJUR.asn1.DERInteger = function (params) {\n  KJUR.asn1.DERInteger.superclass.constructor.call(this);\n  this.hT = \"02\";\n  /**\n   * set value by Tom Wu's BigInteger object\n   * @name setByBigInteger\n   * @memberOf KJUR.asn1.DERInteger#\n   * @function\n   * @param {BigInteger} bigIntegerValue to set\n   */\n\n  this.setByBigInteger = function (bigIntegerValue) {\n    this.hTLV = null;\n    this.isModified = true;\n    this.hV = KJUR.asn1.ASN1Util.bigIntToMinTwosComplementsHex(bigIntegerValue);\n  };\n  /**\n   * set value by integer value\n   * @name setByInteger\n   * @memberOf KJUR.asn1.DERInteger\n   * @function\n   * @param {Integer} integer value to set\n   */\n\n\n  this.setByInteger = function (intValue) {\n    var bi = new BigInteger(String(intValue), 10);\n    this.setByBigInteger(bi);\n  };\n  /**\n   * set value by integer value\n   * @name setValueHex\n   * @memberOf KJUR.asn1.DERInteger#\n   * @function\n   * @param {String} hexadecimal string of integer value\n   * @description\n   * <br/>\n   * NOTE: Value shall be represented by minimum octet length of\n   * two's complement representation.\n   * @example\n   * new KJUR.asn1.DERInteger(123);\n   * new KJUR.asn1.DERInteger({'int': 123});\n   * new KJUR.asn1.DERInteger({'hex': '1fad'});\n   */\n\n\n  this.setValueHex = function (newHexString) {\n    this.hV = newHexString;\n  };\n\n  this.getFreshValueHex = function () {\n    return this.hV;\n  };\n\n  if (typeof params != \"undefined\") {\n    if (typeof params['bigint'] != \"undefined\") {\n      this.setByBigInteger(params['bigint']);\n    } else if (typeof params['int'] != \"undefined\") {\n      this.setByInteger(params['int']);\n    } else if (typeof params == \"number\") {\n      this.setByInteger(params);\n    } else if (typeof params['hex'] != \"undefined\") {\n      this.setValueHex(params['hex']);\n    }\n  }\n};\n\nYAHOO.lang.extend(KJUR.asn1.DERInteger, KJUR.asn1.ASN1Object); // ********************************************************************\n\n/**\n * class for ASN.1 DER encoded BitString primitive\n * @name KJUR.asn1.DERBitString\n * @class class for ASN.1 DER encoded BitString primitive\n * @extends KJUR.asn1.ASN1Object\n * @description\n * <br/>\n * As for argument 'params' for constructor, you can specify one of\n * following properties:\n * <ul>\n * <li>bin - specify binary string (ex. '10111')</li>\n * <li>array - specify array of boolean (ex. [true,false,true,true])</li>\n * <li>hex - specify hexadecimal string of ASN.1 value(V) including unused bits</li>\n * <li>obj - specify {@link KJUR.asn1.ASN1Util.newObject}\n * argument for \"BitString encapsulates\" structure.</li>\n * </ul>\n * NOTE1: 'params' can be omitted.<br/>\n * NOTE2: 'obj' parameter have been supported since\n * asn1 1.0.11, jsrsasign 6.1.1 (2016-Sep-25).<br/>\n * @example\n * // default constructor\n * o = new KJUR.asn1.DERBitString();\n * // initialize with binary string\n * o = new KJUR.asn1.DERBitString({bin: \"1011\"});\n * // initialize with boolean array\n * o = new KJUR.asn1.DERBitString({array: [true,false,true,true]});\n * // initialize with hexadecimal string (04 is unused bits)\n * o = new KJUR.asn1.DEROctetString({hex: \"04bac0\"});\n * // initialize with ASN1Util.newObject argument for encapsulated\n * o = new KJUR.asn1.DERBitString({obj: {seq: [{int: 3}, {prnstr: 'aaa'}]}});\n * // above generates a ASN.1 data like this:\n * // BIT STRING, encapsulates {\n * //   SEQUENCE {\n * //     INTEGER 3\n * //     PrintableString 'aaa'\n * //     }\n * //   }\n */\n\nKJUR.asn1.DERBitString = function (params) {\n  if (params !== undefined && typeof params.obj !== \"undefined\") {\n    var o = KJUR.asn1.ASN1Util.newObject(params.obj);\n    params.hex = \"00\" + o.getEncodedHex();\n  }\n\n  KJUR.asn1.DERBitString.superclass.constructor.call(this);\n  this.hT = \"03\";\n  /**\n   * set ASN.1 value(V) by a hexadecimal string including unused bits\n   * @name setHexValueIncludingUnusedBits\n   * @memberOf KJUR.asn1.DERBitString#\n   * @function\n   * @param {String} newHexStringIncludingUnusedBits\n   */\n\n  this.setHexValueIncludingUnusedBits = function (newHexStringIncludingUnusedBits) {\n    this.hTLV = null;\n    this.isModified = true;\n    this.hV = newHexStringIncludingUnusedBits;\n  };\n  /**\n   * set ASN.1 value(V) by unused bit and hexadecimal string of value\n   * @name setUnusedBitsAndHexValue\n   * @memberOf KJUR.asn1.DERBitString#\n   * @function\n   * @param {Integer} unusedBits\n   * @param {String} hValue\n   */\n\n\n  this.setUnusedBitsAndHexValue = function (unusedBits, hValue) {\n    if (unusedBits < 0 || 7 < unusedBits) {\n      throw \"unused bits shall be from 0 to 7: u = \" + unusedBits;\n    }\n\n    var hUnusedBits = \"0\" + unusedBits;\n    this.hTLV = null;\n    this.isModified = true;\n    this.hV = hUnusedBits + hValue;\n  };\n  /**\n   * set ASN.1 DER BitString by binary string<br/>\n   * @name setByBinaryString\n   * @memberOf KJUR.asn1.DERBitString#\n   * @function\n   * @param {String} binaryString binary value string (i.e. '10111')\n   * @description\n   * Its unused bits will be calculated automatically by length of\n   * 'binaryValue'. <br/>\n   * NOTE: Trailing zeros '0' will be ignored.\n   * @example\n   * o = new KJUR.asn1.DERBitString();\n   * o.setByBooleanArray(\"01011\");\n   */\n\n\n  this.setByBinaryString = function (binaryString) {\n    binaryString = binaryString.replace(/0+$/, '');\n    var unusedBits = 8 - binaryString.length % 8;\n    if (unusedBits == 8) unusedBits = 0;\n\n    for (var i = 0; i <= unusedBits; i++) {\n      binaryString += '0';\n    }\n\n    var h = '';\n\n    for (var i = 0; i < binaryString.length - 1; i += 8) {\n      var b = binaryString.substr(i, 8);\n      var x = parseInt(b, 2).toString(16);\n      if (x.length == 1) x = '0' + x;\n      h += x;\n    }\n\n    this.hTLV = null;\n    this.isModified = true;\n    this.hV = '0' + unusedBits + h;\n  };\n  /**\n   * set ASN.1 TLV value(V) by an array of boolean<br/>\n   * @name setByBooleanArray\n   * @memberOf KJUR.asn1.DERBitString#\n   * @function\n   * @param {array} booleanArray array of boolean (ex. [true, false, true])\n   * @description\n   * NOTE: Trailing falses will be ignored in the ASN.1 DER Object.\n   * @example\n   * o = new KJUR.asn1.DERBitString();\n   * o.setByBooleanArray([false, true, false, true, true]);\n   */\n\n\n  this.setByBooleanArray = function (booleanArray) {\n    var s = '';\n\n    for (var i = 0; i < booleanArray.length; i++) {\n      if (booleanArray[i] == true) {\n        s += '1';\n      } else {\n        s += '0';\n      }\n    }\n\n    this.setByBinaryString(s);\n  };\n  /**\n   * generate an array of falses with specified length<br/>\n   * @name newFalseArray\n   * @memberOf KJUR.asn1.DERBitString\n   * @function\n   * @param {Integer} nLength length of array to generate\n   * @return {array} array of boolean falses\n   * @description\n   * This static method may be useful to initialize boolean array.\n   * @example\n   * o = new KJUR.asn1.DERBitString();\n   * o.newFalseArray(3) &rarr; [false, false, false]\n   */\n\n\n  this.newFalseArray = function (nLength) {\n    var a = new Array(nLength);\n\n    for (var i = 0; i < nLength; i++) {\n      a[i] = false;\n    }\n\n    return a;\n  };\n\n  this.getFreshValueHex = function () {\n    return this.hV;\n  };\n\n  if (typeof params != \"undefined\") {\n    if (typeof params == \"string\" && params.toLowerCase().match(/^[0-9a-f]+$/)) {\n      this.setHexValueIncludingUnusedBits(params);\n    } else if (typeof params['hex'] != \"undefined\") {\n      this.setHexValueIncludingUnusedBits(params['hex']);\n    } else if (typeof params['bin'] != \"undefined\") {\n      this.setByBinaryString(params['bin']);\n    } else if (typeof params['array'] != \"undefined\") {\n      this.setByBooleanArray(params['array']);\n    }\n  }\n};\n\nYAHOO.lang.extend(KJUR.asn1.DERBitString, KJUR.asn1.ASN1Object); // ********************************************************************\n\n/**\n * class for ASN.1 DER OctetString<br/>\n * @name KJUR.asn1.DEROctetString\n * @class class for ASN.1 DER OctetString\n * @param {Array} params associative array of parameters (ex. {'str': 'aaa'})\n * @extends KJUR.asn1.DERAbstractString\n * @description\n * This class provides ASN.1 OctetString simple type.<br/>\n * Supported \"params\" attributes are:\n * <ul>\n * <li>str - to set a string as a value</li>\n * <li>hex - to set a hexadecimal string as a value</li>\n * <li>obj - to set a encapsulated ASN.1 value by JSON object\n * which is defined in {@link KJUR.asn1.ASN1Util.newObject}</li>\n * </ul>\n * NOTE: A parameter 'obj' have been supported\n * for \"OCTET STRING, encapsulates\" structure.\n * since asn1 1.0.11, jsrsasign 6.1.1 (2016-Sep-25).\n * @see KJUR.asn1.DERAbstractString - superclass\n * @example\n * // default constructor\n * o = new KJUR.asn1.DEROctetString();\n * // initialize with string\n * o = new KJUR.asn1.DEROctetString({str: \"aaa\"});\n * // initialize with hexadecimal string\n * o = new KJUR.asn1.DEROctetString({hex: \"616161\"});\n * // initialize with ASN1Util.newObject argument\n * o = new KJUR.asn1.DEROctetString({obj: {seq: [{int: 3}, {prnstr: 'aaa'}]}});\n * // above generates a ASN.1 data like this:\n * // OCTET STRING, encapsulates {\n * //   SEQUENCE {\n * //     INTEGER 3\n * //     PrintableString 'aaa'\n * //     }\n * //   }\n */\n\nKJUR.asn1.DEROctetString = function (params) {\n  if (params !== undefined && typeof params.obj !== \"undefined\") {\n    var o = KJUR.asn1.ASN1Util.newObject(params.obj);\n    params.hex = o.getEncodedHex();\n  }\n\n  KJUR.asn1.DEROctetString.superclass.constructor.call(this, params);\n  this.hT = \"04\";\n};\n\nYAHOO.lang.extend(KJUR.asn1.DEROctetString, KJUR.asn1.DERAbstractString); // ********************************************************************\n\n/**\n * class for ASN.1 DER Null\n * @name KJUR.asn1.DERNull\n * @class class for ASN.1 DER Null\n * @extends KJUR.asn1.ASN1Object\n * @description\n * @see KJUR.asn1.ASN1Object - superclass\n */\n\nKJUR.asn1.DERNull = function () {\n  KJUR.asn1.DERNull.superclass.constructor.call(this);\n  this.hT = \"05\";\n  this.hTLV = \"0500\";\n};\n\nYAHOO.lang.extend(KJUR.asn1.DERNull, KJUR.asn1.ASN1Object); // ********************************************************************\n\n/**\n * class for ASN.1 DER ObjectIdentifier\n * @name KJUR.asn1.DERObjectIdentifier\n * @class class for ASN.1 DER ObjectIdentifier\n * @param {Array} params associative array of parameters (ex. {'oid': '2.5.4.5'})\n * @extends KJUR.asn1.ASN1Object\n * @description\n * <br/>\n * As for argument 'params' for constructor, you can specify one of\n * following properties:\n * <ul>\n * <li>oid - specify initial ASN.1 value(V) by a oid string (ex. 2.5.4.13)</li>\n * <li>hex - specify initial ASN.1 value(V) by a hexadecimal string</li>\n * </ul>\n * NOTE: 'params' can be omitted.\n */\n\nKJUR.asn1.DERObjectIdentifier = function (params) {\n  var itox = function (i) {\n    var h = i.toString(16);\n    if (h.length == 1) h = '0' + h;\n    return h;\n  };\n\n  var roidtox = function (roid) {\n    var h = '';\n    var bi = new BigInteger(roid, 10);\n    var b = bi.toString(2);\n    var padLen = 7 - b.length % 7;\n    if (padLen == 7) padLen = 0;\n    var bPad = '';\n\n    for (var i = 0; i < padLen; i++) bPad += '0';\n\n    b = bPad + b;\n\n    for (var i = 0; i < b.length - 1; i += 7) {\n      var b8 = b.substr(i, 7);\n      if (i != b.length - 7) b8 = '1' + b8;\n      h += itox(parseInt(b8, 2));\n    }\n\n    return h;\n  };\n\n  KJUR.asn1.DERObjectIdentifier.superclass.constructor.call(this);\n  this.hT = \"06\";\n  /**\n   * set value by a hexadecimal string\n   * @name setValueHex\n   * @memberOf KJUR.asn1.DERObjectIdentifier#\n   * @function\n   * @param {String} newHexString hexadecimal value of OID bytes\n   */\n\n  this.setValueHex = function (newHexString) {\n    this.hTLV = null;\n    this.isModified = true;\n    this.s = null;\n    this.hV = newHexString;\n  };\n  /**\n   * set value by a OID string<br/>\n   * @name setValueOidString\n   * @memberOf KJUR.asn1.DERObjectIdentifier#\n   * @function\n   * @param {String} oidString OID string (ex. 2.5.4.13)\n   * @example\n   * o = new KJUR.asn1.DERObjectIdentifier();\n   * o.setValueOidString(\"2.5.4.13\");\n   */\n\n\n  this.setValueOidString = function (oidString) {\n    if (!oidString.match(/^[0-9.]+$/)) {\n      throw \"malformed oid string: \" + oidString;\n    }\n\n    var h = '';\n    var a = oidString.split('.');\n    var i0 = parseInt(a[0]) * 40 + parseInt(a[1]);\n    h += itox(i0);\n    a.splice(0, 2);\n\n    for (var i = 0; i < a.length; i++) {\n      h += roidtox(a[i]);\n    }\n\n    this.hTLV = null;\n    this.isModified = true;\n    this.s = null;\n    this.hV = h;\n  };\n  /**\n   * set value by a OID name\n   * @name setValueName\n   * @memberOf KJUR.asn1.DERObjectIdentifier#\n   * @function\n   * @param {String} oidName OID name (ex. 'serverAuth')\n   * @since 1.0.1\n   * @description\n   * OID name shall be defined in 'KJUR.asn1.x509.OID.name2oidList'.\n   * Otherwise raise error.\n   * @example\n   * o = new KJUR.asn1.DERObjectIdentifier();\n   * o.setValueName(\"serverAuth\");\n   */\n\n\n  this.setValueName = function (oidName) {\n    var oid = KJUR.asn1.x509.OID.name2oid(oidName);\n\n    if (oid !== '') {\n      this.setValueOidString(oid);\n    } else {\n      throw \"DERObjectIdentifier oidName undefined: \" + oidName;\n    }\n  };\n\n  this.getFreshValueHex = function () {\n    return this.hV;\n  };\n\n  if (params !== undefined) {\n    if (typeof params === \"string\") {\n      if (params.match(/^[0-2].[0-9.]+$/)) {\n        this.setValueOidString(params);\n      } else {\n        this.setValueName(params);\n      }\n    } else if (params.oid !== undefined) {\n      this.setValueOidString(params.oid);\n    } else if (params.hex !== undefined) {\n      this.setValueHex(params.hex);\n    } else if (params.name !== undefined) {\n      this.setValueName(params.name);\n    }\n  }\n};\n\nYAHOO.lang.extend(KJUR.asn1.DERObjectIdentifier, KJUR.asn1.ASN1Object); // ********************************************************************\n\n/**\n * class for ASN.1 DER Enumerated\n * @name KJUR.asn1.DEREnumerated\n * @class class for ASN.1 DER Enumerated\n * @extends KJUR.asn1.ASN1Object\n * @description\n * <br/>\n * As for argument 'params' for constructor, you can specify one of\n * following properties:\n * <ul>\n * <li>int - specify initial ASN.1 value(V) by integer value</li>\n * <li>hex - specify initial ASN.1 value(V) by a hexadecimal string</li>\n * </ul>\n * NOTE: 'params' can be omitted.\n * @example\n * new KJUR.asn1.DEREnumerated(123);\n * new KJUR.asn1.DEREnumerated({int: 123});\n * new KJUR.asn1.DEREnumerated({hex: '1fad'});\n */\n\nKJUR.asn1.DEREnumerated = function (params) {\n  KJUR.asn1.DEREnumerated.superclass.constructor.call(this);\n  this.hT = \"0a\";\n  /**\n   * set value by Tom Wu's BigInteger object\n   * @name setByBigInteger\n   * @memberOf KJUR.asn1.DEREnumerated#\n   * @function\n   * @param {BigInteger} bigIntegerValue to set\n   */\n\n  this.setByBigInteger = function (bigIntegerValue) {\n    this.hTLV = null;\n    this.isModified = true;\n    this.hV = KJUR.asn1.ASN1Util.bigIntToMinTwosComplementsHex(bigIntegerValue);\n  };\n  /**\n   * set value by integer value\n   * @name setByInteger\n   * @memberOf KJUR.asn1.DEREnumerated#\n   * @function\n   * @param {Integer} integer value to set\n   */\n\n\n  this.setByInteger = function (intValue) {\n    var bi = new BigInteger(String(intValue), 10);\n    this.setByBigInteger(bi);\n  };\n  /**\n   * set value by integer value\n   * @name setValueHex\n   * @memberOf KJUR.asn1.DEREnumerated#\n   * @function\n   * @param {String} hexadecimal string of integer value\n   * @description\n   * <br/>\n   * NOTE: Value shall be represented by minimum octet length of\n   * two's complement representation.\n   */\n\n\n  this.setValueHex = function (newHexString) {\n    this.hV = newHexString;\n  };\n\n  this.getFreshValueHex = function () {\n    return this.hV;\n  };\n\n  if (typeof params != \"undefined\") {\n    if (typeof params['int'] != \"undefined\") {\n      this.setByInteger(params['int']);\n    } else if (typeof params == \"number\") {\n      this.setByInteger(params);\n    } else if (typeof params['hex'] != \"undefined\") {\n      this.setValueHex(params['hex']);\n    }\n  }\n};\n\nYAHOO.lang.extend(KJUR.asn1.DEREnumerated, KJUR.asn1.ASN1Object); // ********************************************************************\n\n/**\n * class for ASN.1 DER UTF8String\n * @name KJUR.asn1.DERUTF8String\n * @class class for ASN.1 DER UTF8String\n * @param {Array} params associative array of parameters (ex. {'str': 'aaa'})\n * @extends KJUR.asn1.DERAbstractString\n * @description\n * @see KJUR.asn1.DERAbstractString - superclass\n */\n\nKJUR.asn1.DERUTF8String = function (params) {\n  KJUR.asn1.DERUTF8String.superclass.constructor.call(this, params);\n  this.hT = \"0c\";\n};\n\nYAHOO.lang.extend(KJUR.asn1.DERUTF8String, KJUR.asn1.DERAbstractString); // ********************************************************************\n\n/**\n * class for ASN.1 DER NumericString\n * @name KJUR.asn1.DERNumericString\n * @class class for ASN.1 DER NumericString\n * @param {Array} params associative array of parameters (ex. {'str': 'aaa'})\n * @extends KJUR.asn1.DERAbstractString\n * @description\n * @see KJUR.asn1.DERAbstractString - superclass\n */\n\nKJUR.asn1.DERNumericString = function (params) {\n  KJUR.asn1.DERNumericString.superclass.constructor.call(this, params);\n  this.hT = \"12\";\n};\n\nYAHOO.lang.extend(KJUR.asn1.DERNumericString, KJUR.asn1.DERAbstractString); // ********************************************************************\n\n/**\n * class for ASN.1 DER PrintableString\n * @name KJUR.asn1.DERPrintableString\n * @class class for ASN.1 DER PrintableString\n * @param {Array} params associative array of parameters (ex. {'str': 'aaa'})\n * @extends KJUR.asn1.DERAbstractString\n * @description\n * @see KJUR.asn1.DERAbstractString - superclass\n */\n\nKJUR.asn1.DERPrintableString = function (params) {\n  KJUR.asn1.DERPrintableString.superclass.constructor.call(this, params);\n  this.hT = \"13\";\n};\n\nYAHOO.lang.extend(KJUR.asn1.DERPrintableString, KJUR.asn1.DERAbstractString); // ********************************************************************\n\n/**\n * class for ASN.1 DER TeletexString\n * @name KJUR.asn1.DERTeletexString\n * @class class for ASN.1 DER TeletexString\n * @param {Array} params associative array of parameters (ex. {'str': 'aaa'})\n * @extends KJUR.asn1.DERAbstractString\n * @description\n * @see KJUR.asn1.DERAbstractString - superclass\n */\n\nKJUR.asn1.DERTeletexString = function (params) {\n  KJUR.asn1.DERTeletexString.superclass.constructor.call(this, params);\n  this.hT = \"14\";\n};\n\nYAHOO.lang.extend(KJUR.asn1.DERTeletexString, KJUR.asn1.DERAbstractString); // ********************************************************************\n\n/**\n * class for ASN.1 DER IA5String\n * @name KJUR.asn1.DERIA5String\n * @class class for ASN.1 DER IA5String\n * @param {Array} params associative array of parameters (ex. {'str': 'aaa'})\n * @extends KJUR.asn1.DERAbstractString\n * @description\n * @see KJUR.asn1.DERAbstractString - superclass\n */\n\nKJUR.asn1.DERIA5String = function (params) {\n  KJUR.asn1.DERIA5String.superclass.constructor.call(this, params);\n  this.hT = \"16\";\n};\n\nYAHOO.lang.extend(KJUR.asn1.DERIA5String, KJUR.asn1.DERAbstractString); // ********************************************************************\n\n/**\n * class for ASN.1 DER UTCTime\n * @name KJUR.asn1.DERUTCTime\n * @class class for ASN.1 DER UTCTime\n * @param {Array} params associative array of parameters (ex. {'str': '130430235959Z'})\n * @extends KJUR.asn1.DERAbstractTime\n * @description\n * <br/>\n * As for argument 'params' for constructor, you can specify one of\n * following properties:\n * <ul>\n * <li>str - specify initial ASN.1 value(V) by a string (ex.'130430235959Z')</li>\n * <li>hex - specify initial ASN.1 value(V) by a hexadecimal string</li>\n * <li>date - specify Date object.</li>\n * </ul>\n * NOTE: 'params' can be omitted.\n * <h4>EXAMPLES</h4>\n * @example\n * d1 = new KJUR.asn1.DERUTCTime();\n * d1.setString('130430125959Z');\n *\n * d2 = new KJUR.asn1.DERUTCTime({'str': '130430125959Z'});\n * d3 = new KJUR.asn1.DERUTCTime({'date': new Date(Date.UTC(2015, 0, 31, 0, 0, 0, 0))});\n * d4 = new KJUR.asn1.DERUTCTime('130430125959Z');\n */\n\nKJUR.asn1.DERUTCTime = function (params) {\n  KJUR.asn1.DERUTCTime.superclass.constructor.call(this, params);\n  this.hT = \"17\";\n  /**\n   * set value by a Date object<br/>\n   * @name setByDate\n   * @memberOf KJUR.asn1.DERUTCTime#\n   * @function\n   * @param {Date} dateObject Date object to set ASN.1 value(V)\n   * @example\n   * o = new KJUR.asn1.DERUTCTime();\n   * o.setByDate(new Date(\"2016/12/31\"));\n   */\n\n  this.setByDate = function (dateObject) {\n    this.hTLV = null;\n    this.isModified = true;\n    this.date = dateObject;\n    this.s = this.formatDate(this.date, 'utc');\n    this.hV = stohex(this.s);\n  };\n\n  this.getFreshValueHex = function () {\n    if (typeof this.date == \"undefined\" && typeof this.s == \"undefined\") {\n      this.date = new Date();\n      this.s = this.formatDate(this.date, 'utc');\n      this.hV = stohex(this.s);\n    }\n\n    return this.hV;\n  };\n\n  if (params !== undefined) {\n    if (params.str !== undefined) {\n      this.setString(params.str);\n    } else if (typeof params == \"string\" && params.match(/^[0-9]{12}Z$/)) {\n      this.setString(params);\n    } else if (params.hex !== undefined) {\n      this.setStringHex(params.hex);\n    } else if (params.date !== undefined) {\n      this.setByDate(params.date);\n    }\n  }\n};\n\nYAHOO.lang.extend(KJUR.asn1.DERUTCTime, KJUR.asn1.DERAbstractTime); // ********************************************************************\n\n/**\n * class for ASN.1 DER GeneralizedTime\n * @name KJUR.asn1.DERGeneralizedTime\n * @class class for ASN.1 DER GeneralizedTime\n * @param {Array} params associative array of parameters (ex. {'str': '20130430235959Z'})\n * @property {Boolean} withMillis flag to show milliseconds or not\n * @extends KJUR.asn1.DERAbstractTime\n * @description\n * <br/>\n * As for argument 'params' for constructor, you can specify one of\n * following properties:\n * <ul>\n * <li>str - specify initial ASN.1 value(V) by a string (ex.'20130430235959Z')</li>\n * <li>hex - specify initial ASN.1 value(V) by a hexadecimal string</li>\n * <li>date - specify Date object.</li>\n * <li>millis - specify flag to show milliseconds (from 1.0.6)</li>\n * </ul>\n * NOTE1: 'params' can be omitted.\n * NOTE2: 'withMillis' property is supported from asn1 1.0.6.\n */\n\nKJUR.asn1.DERGeneralizedTime = function (params) {\n  KJUR.asn1.DERGeneralizedTime.superclass.constructor.call(this, params);\n  this.hT = \"18\";\n  this.withMillis = false;\n  /**\n   * set value by a Date object\n   * @name setByDate\n   * @memberOf KJUR.asn1.DERGeneralizedTime#\n   * @function\n   * @param {Date} dateObject Date object to set ASN.1 value(V)\n   * @example\n   * When you specify UTC time, use 'Date.UTC' method like this:<br/>\n   * o1 = new DERUTCTime();\n   * o1.setByDate(date);\n   *\n   * date = new Date(Date.UTC(2015, 0, 31, 23, 59, 59, 0)); #2015JAN31 23:59:59\n   */\n\n  this.setByDate = function (dateObject) {\n    this.hTLV = null;\n    this.isModified = true;\n    this.date = dateObject;\n    this.s = this.formatDate(this.date, 'gen', this.withMillis);\n    this.hV = stohex(this.s);\n  };\n\n  this.getFreshValueHex = function () {\n    if (this.date === undefined && this.s === undefined) {\n      this.date = new Date();\n      this.s = this.formatDate(this.date, 'gen', this.withMillis);\n      this.hV = stohex(this.s);\n    }\n\n    return this.hV;\n  };\n\n  if (params !== undefined) {\n    if (params.str !== undefined) {\n      this.setString(params.str);\n    } else if (typeof params == \"string\" && params.match(/^[0-9]{14}Z$/)) {\n      this.setString(params);\n    } else if (params.hex !== undefined) {\n      this.setStringHex(params.hex);\n    } else if (params.date !== undefined) {\n      this.setByDate(params.date);\n    }\n\n    if (params.millis === true) {\n      this.withMillis = true;\n    }\n  }\n};\n\nYAHOO.lang.extend(KJUR.asn1.DERGeneralizedTime, KJUR.asn1.DERAbstractTime); // ********************************************************************\n\n/**\n * class for ASN.1 DER Sequence\n * @name KJUR.asn1.DERSequence\n * @class class for ASN.1 DER Sequence\n * @extends KJUR.asn1.DERAbstractStructured\n * @description\n * <br/>\n * As for argument 'params' for constructor, you can specify one of\n * following properties:\n * <ul>\n * <li>array - specify array of ASN1Object to set elements of content</li>\n * </ul>\n * NOTE: 'params' can be omitted.\n */\n\nKJUR.asn1.DERSequence = function (params) {\n  KJUR.asn1.DERSequence.superclass.constructor.call(this, params);\n  this.hT = \"30\";\n\n  this.getFreshValueHex = function () {\n    var h = '';\n\n    for (var i = 0; i < this.asn1Array.length; i++) {\n      var asn1Obj = this.asn1Array[i];\n      h += asn1Obj.getEncodedHex();\n    }\n\n    this.hV = h;\n    return this.hV;\n  };\n};\n\nYAHOO.lang.extend(KJUR.asn1.DERSequence, KJUR.asn1.DERAbstractStructured); // ********************************************************************\n\n/**\n * class for ASN.1 DER Set\n * @name KJUR.asn1.DERSet\n * @class class for ASN.1 DER Set\n * @extends KJUR.asn1.DERAbstractStructured\n * @description\n * <br/>\n * As for argument 'params' for constructor, you can specify one of\n * following properties:\n * <ul>\n * <li>array - specify array of ASN1Object to set elements of content</li>\n * <li>sortflag - flag for sort (default: true). ASN.1 BER is not sorted in 'SET OF'.</li>\n * </ul>\n * NOTE1: 'params' can be omitted.<br/>\n * NOTE2: sortflag is supported since 1.0.5.\n */\n\nKJUR.asn1.DERSet = function (params) {\n  KJUR.asn1.DERSet.superclass.constructor.call(this, params);\n  this.hT = \"31\";\n  this.sortFlag = true; // item shall be sorted only in ASN.1 DER\n\n  this.getFreshValueHex = function () {\n    var a = new Array();\n\n    for (var i = 0; i < this.asn1Array.length; i++) {\n      var asn1Obj = this.asn1Array[i];\n      a.push(asn1Obj.getEncodedHex());\n    }\n\n    if (this.sortFlag == true) a.sort();\n    this.hV = a.join('');\n    return this.hV;\n  };\n\n  if (typeof params != \"undefined\") {\n    if (typeof params.sortflag != \"undefined\" && params.sortflag == false) this.sortFlag = false;\n  }\n};\n\nYAHOO.lang.extend(KJUR.asn1.DERSet, KJUR.asn1.DERAbstractStructured); // ********************************************************************\n\n/**\n * class for ASN.1 DER TaggedObject\n * @name KJUR.asn1.DERTaggedObject\n * @class class for ASN.1 DER TaggedObject\n * @extends KJUR.asn1.ASN1Object\n * @description\n * <br/>\n * Parameter 'tagNoNex' is ASN.1 tag(T) value for this object.\n * For example, if you find '[1]' tag in a ASN.1 dump,\n * 'tagNoHex' will be 'a1'.\n * <br/>\n * As for optional argument 'params' for constructor, you can specify *ANY* of\n * following properties:\n * <ul>\n * <li>explicit - specify true if this is explicit tag otherwise false\n *     (default is 'true').</li>\n * <li>tag - specify tag (default is 'a0' which means [0])</li>\n * <li>obj - specify ASN1Object which is tagged</li>\n * </ul>\n * @example\n * d1 = new KJUR.asn1.DERUTF8String({'str':'a'});\n * d2 = new KJUR.asn1.DERTaggedObject({'obj': d1});\n * hex = d2.getEncodedHex();\n */\n\nKJUR.asn1.DERTaggedObject = function (params) {\n  KJUR.asn1.DERTaggedObject.superclass.constructor.call(this);\n  this.hT = \"a0\";\n  this.hV = '';\n  this.isExplicit = true;\n  this.asn1Object = null;\n  /**\n   * set value by an ASN1Object\n   * @name setString\n   * @memberOf KJUR.asn1.DERTaggedObject#\n   * @function\n   * @param {Boolean} isExplicitFlag flag for explicit/implicit tag\n   * @param {Integer} tagNoHex hexadecimal string of ASN.1 tag\n   * @param {ASN1Object} asn1Object ASN.1 to encapsulate\n   */\n\n  this.setASN1Object = function (isExplicitFlag, tagNoHex, asn1Object) {\n    this.hT = tagNoHex;\n    this.isExplicit = isExplicitFlag;\n    this.asn1Object = asn1Object;\n\n    if (this.isExplicit) {\n      this.hV = this.asn1Object.getEncodedHex();\n      this.hTLV = null;\n      this.isModified = true;\n    } else {\n      this.hV = null;\n      this.hTLV = asn1Object.getEncodedHex();\n      this.hTLV = this.hTLV.replace(/^../, tagNoHex);\n      this.isModified = false;\n    }\n  };\n\n  this.getFreshValueHex = function () {\n    return this.hV;\n  };\n\n  if (typeof params != \"undefined\") {\n    if (typeof params['tag'] != \"undefined\") {\n      this.hT = params['tag'];\n    }\n\n    if (typeof params['explicit'] != \"undefined\") {\n      this.isExplicit = params['explicit'];\n    }\n\n    if (typeof params['obj'] != \"undefined\") {\n      this.asn1Object = params['obj'];\n      this.setASN1Object(this.isExplicit, this.hT, this.asn1Object);\n    }\n  }\n};\n\nYAHOO.lang.extend(KJUR.asn1.DERTaggedObject, KJUR.asn1.ASN1Object);","map":{"version":3,"sources":["/Users/sid/Desktop/SSOB/sso/client/node_modules/jsencrypt/lib/lib/jsrsasign/asn1-1.0.js"],"names":["BigInteger","YAHOO","KJUR","asn1","ASN1Util","integerToByteHex","i","h","toString","length","bigIntToMinTwosComplementsHex","bigIntegerValue","substr","match","hPos","xorLen","hMask","biMask","biNeg","xor","add","ONE","replace","getPEMStringFromHex","dataHex","pemHeader","hextopem","newObject","param","_KJUR","_KJUR_asn1","_DERBoolean","DERBoolean","_DERInteger","DERInteger","_DERBitString","DERBitString","_DEROctetString","DEROctetString","_DERNull","DERNull","_DERObjectIdentifier","DERObjectIdentifier","_DEREnumerated","DEREnumerated","_DERUTF8String","DERUTF8String","_DERNumericString","DERNumericString","_DERPrintableString","DERPrintableString","_DERTeletexString","DERTeletexString","_DERIA5String","DERIA5String","_DERUTCTime","DERUTCTime","_DERGeneralizedTime","DERGeneralizedTime","_DERSequence","DERSequence","_DERSet","DERSet","_DERTaggedObject","DERTaggedObject","_newObject","keys","Object","key","indexOf","paramList","a","asn1Obj","push","tagParam","prototype","call","obj","tag","explicit","newParam","undefined","jsonToASN1HEX","getEncodedHex","oidHexToInt","hex","s","i01","parseInt","i0","Math","floor","i1","binbuf","value","bin","slice","bi","oidIntToHex","oidString","itox","roidtox","roid","b","padLen","bPad","b8","split","splice","ASN1Object","isModified","hTLV","hT","hL","hV","getLengthHexFromValue","n","hN","hNlen","head","getFreshValueHex","getValueHex","DERAbstractString","params","superclass","constructor","getString","setString","newS","stohex","setStringHex","newHexString","lang","extend","DERAbstractTime","date","localDateToUTC","d","utc","getTime","getTimezoneOffset","utcDate","Date","formatDate","dateObject","type","withMillis","pad","zeroPadding","year","String","getFullYear","month","getMonth","day","getDate","hour","getHours","min","getMinutes","sec","getSeconds","millis","getMilliseconds","sMillis","len","Array","join","setByDateValue","UTC","setByDate","DERAbstractStructured","asn1Array","setByASN1ObjectArray","asn1ObjectArray","appendASN1Object","asn1Object","setByBigInteger","setByInteger","intValue","setValueHex","o","setHexValueIncludingUnusedBits","newHexStringIncludingUnusedBits","setUnusedBitsAndHexValue","unusedBits","hValue","hUnusedBits","setByBinaryString","binaryString","x","setByBooleanArray","booleanArray","newFalseArray","nLength","toLowerCase","setValueOidString","setValueName","oidName","oid","x509","OID","name2oid","name","str","sortFlag","sort","sortflag","isExplicit","setASN1Object","isExplicitFlag","tagNoHex"],"mappings":"AAAA;AACA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAASA,UAAT,QAA2B,cAA3B;AACA,SAASC,KAAT,QAAsB,SAAtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA,OAAO,IAAIC,IAAI,GAAG,EAAX;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA,IAAI,OAAOA,IAAI,CAACC,IAAZ,IAAoB,WAApB,IAAmC,CAACD,IAAI,CAACC,IAA7C,EACID,IAAI,CAACC,IAAL,GAAY,EAAZ;AACJ;AACA;AACA;AACA;AACA;AACA;;AACAD,IAAI,CAACC,IAAL,CAAUC,QAAV,GAAqB,IAAI,YAAY;AACjC,OAAKC,gBAAL,GAAwB,UAAUC,CAAV,EAAa;AACjC,QAAIC,CAAC,GAAGD,CAAC,CAACE,QAAF,CAAW,EAAX,CAAR;AACA,QAAKD,CAAC,CAACE,MAAF,GAAW,CAAZ,IAAkB,CAAtB,EACIF,CAAC,GAAG,MAAMA,CAAV;AACJ,WAAOA,CAAP;AACH,GALD;;AAMA,OAAKG,6BAAL,GAAqC,UAAUC,eAAV,EAA2B;AAC5D,QAAIJ,CAAC,GAAGI,eAAe,CAACH,QAAhB,CAAyB,EAAzB,CAAR;;AACA,QAAID,CAAC,CAACK,MAAF,CAAS,CAAT,EAAY,CAAZ,KAAkB,GAAtB,EAA2B;AACvB,UAAIL,CAAC,CAACE,MAAF,GAAW,CAAX,IAAgB,CAApB,EAAuB;AACnBF,QAAAA,CAAC,GAAG,MAAMA,CAAV;AACH,OAFD,MAGK;AACD,YAAI,CAACA,CAAC,CAACM,KAAF,CA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","sourcesContent":["/* asn1-1.0.13.js (c) 2013-2017 Kenji Urushima | kjur.github.com/jsrsasign/license\n */\n/*\n * asn1.js - ASN.1 DER encoder classes\n *\n * Copyright (c) 2013-2017 Kenji Urushima (kenji.urushima@gmail.com)\n *\n * This software is licensed under the terms of the MIT License.\n * https://kjur.github.io/jsrsasign/license\n *\n * The above copyright and license notice shall be\n * included in all copies or substantial portions of the Software.\n */\nimport { BigInteger } from \"../jsbn/jsbn\";\nimport { YAHOO } from \"./yahoo\";\n/**\n * @fileOverview\n * @name asn1-1.0.js\n * @author Kenji Urushima kenji.urushima@gmail.com\n * @version asn1 1.0.13 (2017-Jun-02)\n * @since jsrsasign 2.1\n * @license <a href=\"https://kjur.github.io/jsrsasign/license/\">MIT License</a>\n */\n/**\n * kjur's class library name space\n * <p>\n * This name space provides following name spaces:\n * <ul>\n * <li>{@link KJUR.asn1} - ASN.1 primitive hexadecimal encoder</li>\n * <li>{@link KJUR.asn1.x509} - ASN.1 structure for X.509 certificate and CRL</li>\n * <li>{@link KJUR.crypto} - Java Cryptographic Extension(JCE) style MessageDigest/Signature\n * class and utilities</li>\n * </ul>\n * </p>\n * NOTE: Please ignore method summary and document of this namespace. This caused by a bug of jsdoc2.\n * @name KJUR\n * @namespace kjur's class library name space\n */\nexport var KJUR = {};\n/**\n * kjur's ASN.1 class library name space\n * <p>\n * This is ITU-T X.690 ASN.1 DER encoder class library and\n * class structure and methods is very similar to\n * org.bouncycastle.asn1 package of\n * well known BouncyCaslte Cryptography Library.\n * <h4>PROVIDING ASN.1 PRIMITIVES</h4>\n * Here are ASN.1 DER primitive classes.\n * <ul>\n * <li>0x01 {@link KJUR.asn1.DERBoolean}</li>\n * <li>0x02 {@link KJUR.asn1.DERInteger}</li>\n * <li>0x03 {@link KJUR.asn1.DERBitString}</li>\n * <li>0x04 {@link KJUR.asn1.DEROctetString}</li>\n * <li>0x05 {@link KJUR.asn1.DERNull}</li>\n * <li>0x06 {@link KJUR.asn1.DERObjectIdentifier}</li>\n * <li>0x0a {@link KJUR.asn1.DEREnumerated}</li>\n * <li>0x0c {@link KJUR.asn1.DERUTF8String}</li>\n * <li>0x12 {@link KJUR.asn1.DERNumericString}</li>\n * <li>0x13 {@link KJUR.asn1.DERPrintableString}</li>\n * <li>0x14 {@link KJUR.asn1.DERTeletexString}</li>\n * <li>0x16 {@link KJUR.asn1.DERIA5String}</li>\n * <li>0x17 {@link KJUR.asn1.DERUTCTime}</li>\n * <li>0x18 {@link KJUR.asn1.DERGeneralizedTime}</li>\n * <li>0x30 {@link KJUR.asn1.DERSequence}</li>\n * <li>0x31 {@link KJUR.asn1.DERSet}</li>\n * </ul>\n * <h4>OTHER ASN.1 CLASSES</h4>\n * <ul>\n * <li>{@link KJUR.asn1.ASN1Object}</li>\n * <li>{@link KJUR.asn1.DERAbstractString}</li>\n * <li>{@link KJUR.asn1.DERAbstractTime}</li>\n * <li>{@link KJUR.asn1.DERAbstractStructured}</li>\n * <li>{@link KJUR.asn1.DERTaggedObject}</li>\n * </ul>\n * <h4>SUB NAME SPACES</h4>\n * <ul>\n * <li>{@link KJUR.asn1.cades} - CAdES long term signature format</li>\n * <li>{@link KJUR.asn1.cms} - Cryptographic Message Syntax</li>\n * <li>{@link KJUR.asn1.csr} - Certificate Signing Request (CSR/PKCS#10)</li>\n * <li>{@link KJUR.asn1.tsp} - RFC 3161 Timestamping Protocol Format</li>\n * <li>{@link KJUR.asn1.x509} - RFC 5280 X.509 certificate and CRL</li>\n * </ul>\n * </p>\n * NOTE: Please ignore method summary and document of this namespace.\n * This caused by a bug of jsdoc2.\n * @name KJUR.asn1\n * @namespace\n */\nif (typeof KJUR.asn1 == \"undefined\" || !KJUR.asn1)\n    KJUR.asn1 = {};\n/**\n * ASN1 utilities class\n * @name KJUR.asn1.ASN1Util\n * @class ASN1 utilities class\n * @since asn1 1.0.2\n */\nKJUR.asn1.ASN1Util = new function () {\n    this.integerToByteHex = function (i) {\n        var h = i.toString(16);\n        if ((h.length % 2) == 1)\n            h = '0' + h;\n        return h;\n    };\n    this.bigIntToMinTwosComplementsHex = function (bigIntegerValue) {\n        var h = bigIntegerValue.toString(16);\n        if (h.substr(0, 1) != '-') {\n            if (h.length % 2 == 1) {\n                h = '0' + h;\n            }\n            else {\n                if (!h.match(/^[0-7]/)) {\n                    h = '00' + h;\n                }\n            }\n        }\n        else {\n            var hPos = h.substr(1);\n            var xorLen = hPos.length;\n            if (xorLen % 2 == 1) {\n                xorLen += 1;\n            }\n            else {\n                if (!h.match(/^[0-7]/)) {\n                    xorLen += 2;\n                }\n            }\n            var hMask = '';\n            for (var i = 0; i < xorLen; i++) {\n                hMask += 'f';\n            }\n            var biMask = new BigInteger(hMask, 16);\n            var biNeg = biMask.xor(bigIntegerValue).add(BigInteger.ONE);\n            h = biNeg.toString(16).replace(/^-/, '');\n        }\n        return h;\n    };\n    /**\n     * get PEM string from hexadecimal data and header string\n     * @name getPEMStringFromHex\n     * @memberOf KJUR.asn1.ASN1Util\n     * @function\n     * @param {String} dataHex hexadecimal string of PEM body\n     * @param {String} pemHeader PEM header string (ex. 'RSA PRIVATE KEY')\n     * @return {String} PEM formatted string of input data\n     * @description\n     * This method converts a hexadecimal string to a PEM string with\n     * a specified header. Its line break will be CRLF(\"\\r\\n\").\n     * @example\n     * var pem  = KJUR.asn1.ASN1Util.getPEMStringFromHex('616161', 'RSA PRIVATE KEY');\n     * // value of pem will be:\n     * -----BEGIN PRIVATE KEY-----\n     * YWFh\n     * -----END PRIVATE KEY-----\n     */\n    this.getPEMStringFromHex = function (dataHex, pemHeader) {\n        return hextopem(dataHex, pemHeader);\n    };\n    /**\n     * generate ASN1Object specifed by JSON parameters\n     * @name newObject\n     * @memberOf KJUR.asn1.ASN1Util\n     * @function\n     * @param {Array} param JSON parameter to generate ASN1Object\n     * @return {KJUR.asn1.ASN1Object} generated object\n     * @since asn1 1.0.3\n     * @description\n     * generate any ASN1Object specified by JSON param\n     * including ASN.1 primitive or structured.\n     * Generally 'param' can be described as follows:\n     * <blockquote>\n     * {TYPE-OF-ASNOBJ: ASN1OBJ-PARAMETER}\n     * </blockquote>\n     * 'TYPE-OF-ASN1OBJ' can be one of following symbols:\n     * <ul>\n     * <li>'bool' - DERBoolean</li>\n     * <li>'int' - DERInteger</li>\n     * <li>'bitstr' - DERBitString</li>\n     * <li>'octstr' - DEROctetString</li>\n     * <li>'null' - DERNull</li>\n     * <li>'oid' - DERObjectIdentifier</li>\n     * <li>'enum' - DEREnumerated</li>\n     * <li>'utf8str' - DERUTF8String</li>\n     * <li>'numstr' - DERNumericString</li>\n     * <li>'prnstr' - DERPrintableString</li>\n     * <li>'telstr' - DERTeletexString</li>\n     * <li>'ia5str' - DERIA5String</li>\n     * <li>'utctime' - DERUTCTime</li>\n     * <li>'gentime' - DERGeneralizedTime</li>\n     * <li>'seq' - DERSequence</li>\n     * <li>'set' - DERSet</li>\n     * <li>'tag' - DERTaggedObject</li>\n     * </ul>\n     * @example\n     * newObject({'prnstr': 'aaa'});\n     * newObject({'seq': [{'int': 3}, {'prnstr': 'aaa'}]})\n     * // ASN.1 Tagged Object\n     * newObject({'tag': {'tag': 'a1',\n     *                    'explicit': true,\n     *                    'obj': {'seq': [{'int': 3}, {'prnstr': 'aaa'}]}}});\n     * // more simple representation of ASN.1 Tagged Object\n     * newObject({'tag': ['a1',\n     *                    true,\n     *                    {'seq': [\n     *                      {'int': 3},\n     *                      {'prnstr': 'aaa'}]}\n     *                   ]});\n     */\n    this.newObject = function (param) {\n        var _KJUR = KJUR, _KJUR_asn1 = _KJUR.asn1, _DERBoolean = _KJUR_asn1.DERBoolean, _DERInteger = _KJUR_asn1.DERInteger, _DERBitString = _KJUR_asn1.DERBitString, _DEROctetString = _KJUR_asn1.DEROctetString, _DERNull = _KJUR_asn1.DERNull, _DERObjectIdentifier = _KJUR_asn1.DERObjectIdentifier, _DEREnumerated = _KJUR_asn1.DEREnumerated, _DERUTF8String = _KJUR_asn1.DERUTF8String, _DERNumericString = _KJUR_asn1.DERNumericString, _DERPrintableString = _KJUR_asn1.DERPrintableString, _DERTeletexString = _KJUR_asn1.DERTeletexString, _DERIA5String = _KJUR_asn1.DERIA5String, _DERUTCTime = _KJUR_asn1.DERUTCTime, _DERGeneralizedTime = _KJUR_asn1.DERGeneralizedTime, _DERSequence = _KJUR_asn1.DERSequence, _DERSet = _KJUR_asn1.DERSet, _DERTaggedObject = _KJUR_asn1.DERTaggedObject, _newObject = _KJUR_asn1.ASN1Util.newObject;\n        var keys = Object.keys(param);\n        if (keys.length != 1)\n            throw \"key of param shall be only one.\";\n        var key = keys[0];\n        if (\":bool:int:bitstr:octstr:null:oid:enum:utf8str:numstr:prnstr:telstr:ia5str:utctime:gentime:seq:set:tag:\".indexOf(\":\" + key + \":\") == -1)\n            throw \"undefined key: \" + key;\n        if (key == \"bool\")\n            return new _DERBoolean(param[key]);\n        if (key == \"int\")\n            return new _DERInteger(param[key]);\n        if (key == \"bitstr\")\n            return new _DERBitString(param[key]);\n        if (key == \"octstr\")\n            return new _DEROctetString(param[key]);\n        if (key == \"null\")\n            return new _DERNull(param[key]);\n        if (key == \"oid\")\n            return new _DERObjectIdentifier(param[key]);\n        if (key == \"enum\")\n            return new _DEREnumerated(param[key]);\n        if (key == \"utf8str\")\n            return new _DERUTF8String(param[key]);\n        if (key == \"numstr\")\n            return new _DERNumericString(param[key]);\n        if (key == \"prnstr\")\n            return new _DERPrintableString(param[key]);\n        if (key == \"telstr\")\n            return new _DERTeletexString(param[key]);\n        if (key == \"ia5str\")\n            return new _DERIA5String(param[key]);\n        if (key == \"utctime\")\n            return new _DERUTCTime(param[key]);\n        if (key == \"gentime\")\n            return new _DERGeneralizedTime(param[key]);\n        if (key == \"seq\") {\n            var paramList = param[key];\n            var a = [];\n            for (var i = 0; i < paramList.length; i++) {\n                var asn1Obj = _newObject(paramList[i]);\n                a.push(asn1Obj);\n            }\n            return new _DERSequence({ 'array': a });\n        }\n        if (key == \"set\") {\n            var paramList = param[key];\n            var a = [];\n            for (var i = 0; i < paramList.length; i++) {\n                var asn1Obj = _newObject(paramList[i]);\n                a.push(asn1Obj);\n            }\n            return new _DERSet({ 'array': a });\n        }\n        if (key == \"tag\") {\n            var tagParam = param[key];\n            if (Object.prototype.toString.call(tagParam) === '[object Array]' &&\n                tagParam.length == 3) {\n                var obj = _newObject(tagParam[2]);\n                return new _DERTaggedObject({ tag: tagParam[0],\n                    explicit: tagParam[1],\n                    obj: obj });\n            }\n            else {\n                var newParam = {};\n                if (tagParam.explicit !== undefined)\n                    newParam.explicit = tagParam.explicit;\n                if (tagParam.tag !== undefined)\n                    newParam.tag = tagParam.tag;\n                if (tagParam.obj === undefined)\n                    throw \"obj shall be specified for 'tag'.\";\n                newParam.obj = _newObject(tagParam.obj);\n                return new _DERTaggedObject(newParam);\n            }\n        }\n    };\n    /**\n     * get encoded hexadecimal string of ASN1Object specifed by JSON parameters\n     * @name jsonToASN1HEX\n     * @memberOf KJUR.asn1.ASN1Util\n     * @function\n     * @param {Array} param JSON parameter to generate ASN1Object\n     * @return hexadecimal string of ASN1Object\n     * @since asn1 1.0.4\n     * @description\n     * As for ASN.1 object representation of JSON object,\n     * please see {@link newObject}.\n     * @example\n     * jsonToASN1HEX({'prnstr': 'aaa'});\n     */\n    this.jsonToASN1HEX = function (param) {\n        var asn1Obj = this.newObject(param);\n        return asn1Obj.getEncodedHex();\n    };\n};\n/**\n * get dot noted oid number string from hexadecimal value of OID\n * @name oidHexToInt\n * @memberOf KJUR.asn1.ASN1Util\n * @function\n * @param {String} hex hexadecimal value of object identifier\n * @return {String} dot noted string of object identifier\n * @since jsrsasign 4.8.3 asn1 1.0.7\n * @description\n * This static method converts from hexadecimal string representation of\n * ASN.1 value of object identifier to oid number string.\n * @example\n * KJUR.asn1.ASN1Util.oidHexToInt('550406') &rarr; \"2.5.4.6\"\n */\nKJUR.asn1.ASN1Util.oidHexToInt = function (hex) {\n    var s = \"\";\n    var i01 = parseInt(hex.substr(0, 2), 16);\n    var i0 = Math.floor(i01 / 40);\n    var i1 = i01 % 40;\n    var s = i0 + \".\" + i1;\n    var binbuf = \"\";\n    for (var i = 2; i < hex.length; i += 2) {\n        var value = parseInt(hex.substr(i, 2), 16);\n        var bin = (\"00000000\" + value.toString(2)).slice(-8);\n        binbuf = binbuf + bin.substr(1, 7);\n        if (bin.substr(0, 1) == \"0\") {\n            var bi = new BigInteger(binbuf, 2);\n            s = s + \".\" + bi.toString(10);\n            binbuf = \"\";\n        }\n    }\n    ;\n    return s;\n};\n/**\n * get hexadecimal value of object identifier from dot noted oid value\n * @name oidIntToHex\n * @memberOf KJUR.asn1.ASN1Util\n * @function\n * @param {String} oidString dot noted string of object identifier\n * @return {String} hexadecimal value of object identifier\n * @since jsrsasign 4.8.3 asn1 1.0.7\n * @description\n * This static method converts from object identifier value string.\n * to hexadecimal string representation of it.\n * @example\n * KJUR.asn1.ASN1Util.oidIntToHex(\"2.5.4.6\") &rarr; \"550406\"\n */\nKJUR.asn1.ASN1Util.oidIntToHex = function (oidString) {\n    var itox = function (i) {\n        var h = i.toString(16);\n        if (h.length == 1)\n            h = '0' + h;\n        return h;\n    };\n    var roidtox = function (roid) {\n        var h = '';\n        var bi = new BigInteger(roid, 10);\n        var b = bi.toString(2);\n        var padLen = 7 - b.length % 7;\n        if (padLen == 7)\n            padLen = 0;\n        var bPad = '';\n        for (var i = 0; i < padLen; i++)\n            bPad += '0';\n        b = bPad + b;\n        for (var i = 0; i < b.length - 1; i += 7) {\n            var b8 = b.substr(i, 7);\n            if (i != b.length - 7)\n                b8 = '1' + b8;\n            h += itox(parseInt(b8, 2));\n        }\n        return h;\n    };\n    if (!oidString.match(/^[0-9.]+$/)) {\n        throw \"malformed oid string: \" + oidString;\n    }\n    var h = '';\n    var a = oidString.split('.');\n    var i0 = parseInt(a[0]) * 40 + parseInt(a[1]);\n    h += itox(i0);\n    a.splice(0, 2);\n    for (var i = 0; i < a.length; i++) {\n        h += roidtox(a[i]);\n    }\n    return h;\n};\n// ********************************************************************\n//  Abstract ASN.1 Classes\n// ********************************************************************\n// ********************************************************************\n/**\n * base class for ASN.1 DER encoder object\n * @name KJUR.asn1.ASN1Object\n * @class base class for ASN.1 DER encoder object\n * @property {Boolean} isModified flag whether internal data was changed\n * @property {String} hTLV hexadecimal string of ASN.1 TLV\n * @property {String} hT hexadecimal string of ASN.1 TLV tag(T)\n * @property {String} hL hexadecimal string of ASN.1 TLV length(L)\n * @property {String} hV hexadecimal string of ASN.1 TLV value(V)\n * @description\n */\nKJUR.asn1.ASN1Object = function () {\n    var isModified = true;\n    var hTLV = null;\n    var hT = '00';\n    var hL = '00';\n    var hV = '';\n    /**\n     * get hexadecimal ASN.1 TLV length(L) bytes from TLV value(V)\n     * @name getLengthHexFromValue\n     * @memberOf KJUR.asn1.ASN1Object#\n     * @function\n     * @return {String} hexadecimal string of ASN.1 TLV length(L)\n     */\n    this.getLengthHexFromValue = function () {\n        if (typeof this.hV == \"undefined\" || this.hV == null) {\n            throw \"this.hV is null or undefined.\";\n        }\n        if (this.hV.length % 2 == 1) {\n            throw \"value hex must be even length: n=\" + hV.length + \",v=\" + this.hV;\n        }\n        var n = this.hV.length / 2;\n        var hN = n.toString(16);\n        if (hN.length % 2 == 1) {\n            hN = \"0\" + hN;\n        }\n        if (n < 128) {\n            return hN;\n        }\n        else {\n            var hNlen = hN.length / 2;\n            if (hNlen > 15) {\n                throw \"ASN.1 length too long to represent by 8x: n = \" + n.toString(16);\n            }\n            var head = 128 + hNlen;\n            return head.toString(16) + hN;\n        }\n    };\n    /**\n     * get hexadecimal string of ASN.1 TLV bytes\n     * @name getEncodedHex\n     * @memberOf KJUR.asn1.ASN1Object#\n     * @function\n     * @return {String} hexadecimal string of ASN.1 TLV\n     */\n    this.getEncodedHex = function () {\n        if (this.hTLV == null || this.isModified) {\n            this.hV = this.getFreshValueHex();\n            this.hL = this.getLengthHexFromValue();\n            this.hTLV = this.hT + this.hL + this.hV;\n            this.isModified = false;\n            //alert(\"first time: \" + this.hTLV);\n        }\n        return this.hTLV;\n    };\n    /**\n     * get hexadecimal string of ASN.1 TLV value(V) bytes\n     * @name getValueHex\n     * @memberOf KJUR.asn1.ASN1Object#\n     * @function\n     * @return {String} hexadecimal string of ASN.1 TLV value(V) bytes\n     */\n    this.getValueHex = function () {\n        this.getEncodedHex();\n        return this.hV;\n    };\n    this.getFreshValueHex = function () {\n        return '';\n    };\n};\n// == BEGIN DERAbstractString ================================================\n/**\n * base class for ASN.1 DER string classes\n * @name KJUR.asn1.DERAbstractString\n * @class base class for ASN.1 DER string classes\n * @param {Array} params associative array of parameters (ex. {'str': 'aaa'})\n * @property {String} s internal string of value\n * @extends KJUR.asn1.ASN1Object\n * @description\n * <br/>\n * As for argument 'params' for constructor, you can specify one of\n * following properties:\n * <ul>\n * <li>str - specify initial ASN.1 value(V) by a string</li>\n * <li>hex - specify initial ASN.1 value(V) by a hexadecimal string</li>\n * </ul>\n * NOTE: 'params' can be omitted.\n */\nKJUR.asn1.DERAbstractString = function (params) {\n    KJUR.asn1.DERAbstractString.superclass.constructor.call(this);\n    var s = null;\n    var hV = null;\n    /**\n     * get string value of this string object\n     * @name getString\n     * @memberOf KJUR.asn1.DERAbstractString#\n     * @function\n     * @return {String} string value of this string object\n     */\n    this.getString = function () {\n        return this.s;\n    };\n    /**\n     * set value by a string\n     * @name setString\n     * @memberOf KJUR.asn1.DERAbstractString#\n     * @function\n     * @param {String} newS value by a string to set\n     */\n    this.setString = function (newS) {\n        this.hTLV = null;\n        this.isModified = true;\n        this.s = newS;\n        this.hV = stohex(this.s);\n    };\n    /**\n     * set value by a hexadecimal string\n     * @name setStringHex\n     * @memberOf KJUR.asn1.DERAbstractString#\n     * @function\n     * @param {String} newHexString value by a hexadecimal string to set\n     */\n    this.setStringHex = function (newHexString) {\n        this.hTLV = null;\n        this.isModified = true;\n        this.s = null;\n        this.hV = newHexString;\n    };\n    this.getFreshValueHex = function () {\n        return this.hV;\n    };\n    if (typeof params != \"undefined\") {\n        if (typeof params == \"string\") {\n            this.setString(params);\n        }\n        else if (typeof params['str'] != \"undefined\") {\n            this.setString(params['str']);\n        }\n        else if (typeof params['hex'] != \"undefined\") {\n            this.setStringHex(params['hex']);\n        }\n    }\n};\nYAHOO.lang.extend(KJUR.asn1.DERAbstractString, KJUR.asn1.ASN1Object);\n// == END   DERAbstractString ================================================\n// == BEGIN DERAbstractTime ==================================================\n/**\n * base class for ASN.1 DER Generalized/UTCTime class\n * @name KJUR.asn1.DERAbstractTime\n * @class base class for ASN.1 DER Generalized/UTCTime class\n * @param {Array} params associative array of parameters (ex. {'str': '130430235959Z'})\n * @extends KJUR.asn1.ASN1Object\n * @description\n * @see KJUR.asn1.ASN1Object - superclass\n */\nKJUR.asn1.DERAbstractTime = function (params) {\n    KJUR.asn1.DERAbstractTime.superclass.constructor.call(this);\n    var s = null;\n    var date = null;\n    // --- PRIVATE METHODS --------------------\n    this.localDateToUTC = function (d) {\n        utc = d.getTime() + (d.getTimezoneOffset() * 60000);\n        var utcDate = new Date(utc);\n        return utcDate;\n    };\n    /*\n     * format date string by Data object\n     * @name formatDate\n     * @memberOf KJUR.asn1.AbstractTime;\n     * @param {Date} dateObject\n     * @param {string} type 'utc' or 'gen'\n     * @param {boolean} withMillis flag for with millisections or not\n     * @description\n     * 'withMillis' flag is supported from asn1 1.0.6.\n     */\n    this.formatDate = function (dateObject, type, withMillis) {\n        var pad = this.zeroPadding;\n        var d = this.localDateToUTC(dateObject);\n        var year = String(d.getFullYear());\n        if (type == 'utc')\n            year = year.substr(2, 2);\n        var month = pad(String(d.getMonth() + 1), 2);\n        var day = pad(String(d.getDate()), 2);\n        var hour = pad(String(d.getHours()), 2);\n        var min = pad(String(d.getMinutes()), 2);\n        var sec = pad(String(d.getSeconds()), 2);\n        var s = year + month + day + hour + min + sec;\n        if (withMillis === true) {\n            var millis = d.getMilliseconds();\n            if (millis != 0) {\n                var sMillis = pad(String(millis), 3);\n                sMillis = sMillis.replace(/[0]+$/, \"\");\n                s = s + \".\" + sMillis;\n            }\n        }\n        return s + \"Z\";\n    };\n    this.zeroPadding = function (s, len) {\n        if (s.length >= len)\n            return s;\n        return new Array(len - s.length + 1).join('0') + s;\n    };\n    // --- PUBLIC METHODS --------------------\n    /**\n     * get string value of this string object\n     * @name getString\n     * @memberOf KJUR.asn1.DERAbstractTime#\n     * @function\n     * @return {String} string value of this time object\n     */\n    this.getString = function () {\n        return this.s;\n    };\n    /**\n     * set value by a string\n     * @name setString\n     * @memberOf KJUR.asn1.DERAbstractTime#\n     * @function\n     * @param {String} newS value by a string to set such like \"130430235959Z\"\n     */\n    this.setString = function (newS) {\n        this.hTLV = null;\n        this.isModified = true;\n        this.s = newS;\n        this.hV = stohex(newS);\n    };\n    /**\n     * set value by a Date object\n     * @name setByDateValue\n     * @memberOf KJUR.asn1.DERAbstractTime#\n     * @function\n     * @param {Integer} year year of date (ex. 2013)\n     * @param {Integer} month month of date between 1 and 12 (ex. 12)\n     * @param {Integer} day day of month\n     * @param {Integer} hour hours of date\n     * @param {Integer} min minutes of date\n     * @param {Integer} sec seconds of date\n     */\n    this.setByDateValue = function (year, month, day, hour, min, sec) {\n        var dateObject = new Date(Date.UTC(year, month - 1, day, hour, min, sec, 0));\n        this.setByDate(dateObject);\n    };\n    this.getFreshValueHex = function () {\n        return this.hV;\n    };\n};\nYAHOO.lang.extend(KJUR.asn1.DERAbstractTime, KJUR.asn1.ASN1Object);\n// == END   DERAbstractTime ==================================================\n// == BEGIN DERAbstractStructured ============================================\n/**\n * base class for ASN.1 DER structured class\n * @name KJUR.asn1.DERAbstractStructured\n * @class base class for ASN.1 DER structured class\n * @property {Array} asn1Array internal array of ASN1Object\n * @extends KJUR.asn1.ASN1Object\n * @description\n * @see KJUR.asn1.ASN1Object - superclass\n */\nKJUR.asn1.DERAbstractStructured = function (params) {\n    KJUR.asn1.DERAbstractString.superclass.constructor.call(this);\n    var asn1Array = null;\n    /**\n     * set value by array of ASN1Object\n     * @name setByASN1ObjectArray\n     * @memberOf KJUR.asn1.DERAbstractStructured#\n     * @function\n     * @param {array} asn1ObjectArray array of ASN1Object to set\n     */\n    this.setByASN1ObjectArray = function (asn1ObjectArray) {\n        this.hTLV = null;\n        this.isModified = true;\n        this.asn1Array = asn1ObjectArray;\n    };\n    /**\n     * append an ASN1Object to internal array\n     * @name appendASN1Object\n     * @memberOf KJUR.asn1.DERAbstractStructured#\n     * @function\n     * @param {ASN1Object} asn1Object to add\n     */\n    this.appendASN1Object = function (asn1Object) {\n        this.hTLV = null;\n        this.isModified = true;\n        this.asn1Array.push(asn1Object);\n    };\n    this.asn1Array = new Array();\n    if (typeof params != \"undefined\") {\n        if (typeof params['array'] != \"undefined\") {\n            this.asn1Array = params['array'];\n        }\n    }\n};\nYAHOO.lang.extend(KJUR.asn1.DERAbstractStructured, KJUR.asn1.ASN1Object);\n// ********************************************************************\n//  ASN.1 Object Classes\n// ********************************************************************\n// ********************************************************************\n/**\n * class for ASN.1 DER Boolean\n * @name KJUR.asn1.DERBoolean\n * @class class for ASN.1 DER Boolean\n * @extends KJUR.asn1.ASN1Object\n * @description\n * @see KJUR.asn1.ASN1Object - superclass\n */\nKJUR.asn1.DERBoolean = function () {\n    KJUR.asn1.DERBoolean.superclass.constructor.call(this);\n    this.hT = \"01\";\n    this.hTLV = \"0101ff\";\n};\nYAHOO.lang.extend(KJUR.asn1.DERBoolean, KJUR.asn1.ASN1Object);\n// ********************************************************************\n/**\n * class for ASN.1 DER Integer\n * @name KJUR.asn1.DERInteger\n * @class class for ASN.1 DER Integer\n * @extends KJUR.asn1.ASN1Object\n * @description\n * <br/>\n * As for argument 'params' for constructor, you can specify one of\n * following properties:\n * <ul>\n * <li>int - specify initial ASN.1 value(V) by integer value</li>\n * <li>bigint - specify initial ASN.1 value(V) by BigInteger object</li>\n * <li>hex - specify initial ASN.1 value(V) by a hexadecimal string</li>\n * </ul>\n * NOTE: 'params' can be omitted.\n */\nKJUR.asn1.DERInteger = function (params) {\n    KJUR.asn1.DERInteger.superclass.constructor.call(this);\n    this.hT = \"02\";\n    /**\n     * set value by Tom Wu's BigInteger object\n     * @name setByBigInteger\n     * @memberOf KJUR.asn1.DERInteger#\n     * @function\n     * @param {BigInteger} bigIntegerValue to set\n     */\n    this.setByBigInteger = function (bigIntegerValue) {\n        this.hTLV = null;\n        this.isModified = true;\n        this.hV = KJUR.asn1.ASN1Util.bigIntToMinTwosComplementsHex(bigIntegerValue);\n    };\n    /**\n     * set value by integer value\n     * @name setByInteger\n     * @memberOf KJUR.asn1.DERInteger\n     * @function\n     * @param {Integer} integer value to set\n     */\n    this.setByInteger = function (intValue) {\n        var bi = new BigInteger(String(intValue), 10);\n        this.setByBigInteger(bi);\n    };\n    /**\n     * set value by integer value\n     * @name setValueHex\n     * @memberOf KJUR.asn1.DERInteger#\n     * @function\n     * @param {String} hexadecimal string of integer value\n     * @description\n     * <br/>\n     * NOTE: Value shall be represented by minimum octet length of\n     * two's complement representation.\n     * @example\n     * new KJUR.asn1.DERInteger(123);\n     * new KJUR.asn1.DERInteger({'int': 123});\n     * new KJUR.asn1.DERInteger({'hex': '1fad'});\n     */\n    this.setValueHex = function (newHexString) {\n        this.hV = newHexString;\n    };\n    this.getFreshValueHex = function () {\n        return this.hV;\n    };\n    if (typeof params != \"undefined\") {\n        if (typeof params['bigint'] != \"undefined\") {\n            this.setByBigInteger(params['bigint']);\n        }\n        else if (typeof params['int'] != \"undefined\") {\n            this.setByInteger(params['int']);\n        }\n        else if (typeof params == \"number\") {\n            this.setByInteger(params);\n        }\n        else if (typeof params['hex'] != \"undefined\") {\n            this.setValueHex(params['hex']);\n        }\n    }\n};\nYAHOO.lang.extend(KJUR.asn1.DERInteger, KJUR.asn1.ASN1Object);\n// ********************************************************************\n/**\n * class for ASN.1 DER encoded BitString primitive\n * @name KJUR.asn1.DERBitString\n * @class class for ASN.1 DER encoded BitString primitive\n * @extends KJUR.asn1.ASN1Object\n * @description\n * <br/>\n * As for argument 'params' for constructor, you can specify one of\n * following properties:\n * <ul>\n * <li>bin - specify binary string (ex. '10111')</li>\n * <li>array - specify array of boolean (ex. [true,false,true,true])</li>\n * <li>hex - specify hexadecimal string of ASN.1 value(V) including unused bits</li>\n * <li>obj - specify {@link KJUR.asn1.ASN1Util.newObject}\n * argument for \"BitString encapsulates\" structure.</li>\n * </ul>\n * NOTE1: 'params' can be omitted.<br/>\n * NOTE2: 'obj' parameter have been supported since\n * asn1 1.0.11, jsrsasign 6.1.1 (2016-Sep-25).<br/>\n * @example\n * // default constructor\n * o = new KJUR.asn1.DERBitString();\n * // initialize with binary string\n * o = new KJUR.asn1.DERBitString({bin: \"1011\"});\n * // initialize with boolean array\n * o = new KJUR.asn1.DERBitString({array: [true,false,true,true]});\n * // initialize with hexadecimal string (04 is unused bits)\n * o = new KJUR.asn1.DEROctetString({hex: \"04bac0\"});\n * // initialize with ASN1Util.newObject argument for encapsulated\n * o = new KJUR.asn1.DERBitString({obj: {seq: [{int: 3}, {prnstr: 'aaa'}]}});\n * // above generates a ASN.1 data like this:\n * // BIT STRING, encapsulates {\n * //   SEQUENCE {\n * //     INTEGER 3\n * //     PrintableString 'aaa'\n * //     }\n * //   }\n */\nKJUR.asn1.DERBitString = function (params) {\n    if (params !== undefined && typeof params.obj !== \"undefined\") {\n        var o = KJUR.asn1.ASN1Util.newObject(params.obj);\n        params.hex = \"00\" + o.getEncodedHex();\n    }\n    KJUR.asn1.DERBitString.superclass.constructor.call(this);\n    this.hT = \"03\";\n    /**\n     * set ASN.1 value(V) by a hexadecimal string including unused bits\n     * @name setHexValueIncludingUnusedBits\n     * @memberOf KJUR.asn1.DERBitString#\n     * @function\n     * @param {String} newHexStringIncludingUnusedBits\n     */\n    this.setHexValueIncludingUnusedBits = function (newHexStringIncludingUnusedBits) {\n        this.hTLV = null;\n        this.isModified = true;\n        this.hV = newHexStringIncludingUnusedBits;\n    };\n    /**\n     * set ASN.1 value(V) by unused bit and hexadecimal string of value\n     * @name setUnusedBitsAndHexValue\n     * @memberOf KJUR.asn1.DERBitString#\n     * @function\n     * @param {Integer} unusedBits\n     * @param {String} hValue\n     */\n    this.setUnusedBitsAndHexValue = function (unusedBits, hValue) {\n        if (unusedBits < 0 || 7 < unusedBits) {\n            throw \"unused bits shall be from 0 to 7: u = \" + unusedBits;\n        }\n        var hUnusedBits = \"0\" + unusedBits;\n        this.hTLV = null;\n        this.isModified = true;\n        this.hV = hUnusedBits + hValue;\n    };\n    /**\n     * set ASN.1 DER BitString by binary string<br/>\n     * @name setByBinaryString\n     * @memberOf KJUR.asn1.DERBitString#\n     * @function\n     * @param {String} binaryString binary value string (i.e. '10111')\n     * @description\n     * Its unused bits will be calculated automatically by length of\n     * 'binaryValue'. <br/>\n     * NOTE: Trailing zeros '0' will be ignored.\n     * @example\n     * o = new KJUR.asn1.DERBitString();\n     * o.setByBooleanArray(\"01011\");\n     */\n    this.setByBinaryString = function (binaryString) {\n        binaryString = binaryString.replace(/0+$/, '');\n        var unusedBits = 8 - binaryString.length % 8;\n        if (unusedBits == 8)\n            unusedBits = 0;\n        for (var i = 0; i <= unusedBits; i++) {\n            binaryString += '0';\n        }\n        var h = '';\n        for (var i = 0; i < binaryString.length - 1; i += 8) {\n            var b = binaryString.substr(i, 8);\n            var x = parseInt(b, 2).toString(16);\n            if (x.length == 1)\n                x = '0' + x;\n            h += x;\n        }\n        this.hTLV = null;\n        this.isModified = true;\n        this.hV = '0' + unusedBits + h;\n    };\n    /**\n     * set ASN.1 TLV value(V) by an array of boolean<br/>\n     * @name setByBooleanArray\n     * @memberOf KJUR.asn1.DERBitString#\n     * @function\n     * @param {array} booleanArray array of boolean (ex. [true, false, true])\n     * @description\n     * NOTE: Trailing falses will be ignored in the ASN.1 DER Object.\n     * @example\n     * o = new KJUR.asn1.DERBitString();\n     * o.setByBooleanArray([false, true, false, true, true]);\n     */\n    this.setByBooleanArray = function (booleanArray) {\n        var s = '';\n        for (var i = 0; i < booleanArray.length; i++) {\n            if (booleanArray[i] == true) {\n                s += '1';\n            }\n            else {\n                s += '0';\n            }\n        }\n        this.setByBinaryString(s);\n    };\n    /**\n     * generate an array of falses with specified length<br/>\n     * @name newFalseArray\n     * @memberOf KJUR.asn1.DERBitString\n     * @function\n     * @param {Integer} nLength length of array to generate\n     * @return {array} array of boolean falses\n     * @description\n     * This static method may be useful to initialize boolean array.\n     * @example\n     * o = new KJUR.asn1.DERBitString();\n     * o.newFalseArray(3) &rarr; [false, false, false]\n     */\n    this.newFalseArray = function (nLength) {\n        var a = new Array(nLength);\n        for (var i = 0; i < nLength; i++) {\n            a[i] = false;\n        }\n        return a;\n    };\n    this.getFreshValueHex = function () {\n        return this.hV;\n    };\n    if (typeof params != \"undefined\") {\n        if (typeof params == \"string\" && params.toLowerCase().match(/^[0-9a-f]+$/)) {\n            this.setHexValueIncludingUnusedBits(params);\n        }\n        else if (typeof params['hex'] != \"undefined\") {\n            this.setHexValueIncludingUnusedBits(params['hex']);\n        }\n        else if (typeof params['bin'] != \"undefined\") {\n            this.setByBinaryString(params['bin']);\n        }\n        else if (typeof params['array'] != \"undefined\") {\n            this.setByBooleanArray(params['array']);\n        }\n    }\n};\nYAHOO.lang.extend(KJUR.asn1.DERBitString, KJUR.asn1.ASN1Object);\n// ********************************************************************\n/**\n * class for ASN.1 DER OctetString<br/>\n * @name KJUR.asn1.DEROctetString\n * @class class for ASN.1 DER OctetString\n * @param {Array} params associative array of parameters (ex. {'str': 'aaa'})\n * @extends KJUR.asn1.DERAbstractString\n * @description\n * This class provides ASN.1 OctetString simple type.<br/>\n * Supported \"params\" attributes are:\n * <ul>\n * <li>str - to set a string as a value</li>\n * <li>hex - to set a hexadecimal string as a value</li>\n * <li>obj - to set a encapsulated ASN.1 value by JSON object\n * which is defined in {@link KJUR.asn1.ASN1Util.newObject}</li>\n * </ul>\n * NOTE: A parameter 'obj' have been supported\n * for \"OCTET STRING, encapsulates\" structure.\n * since asn1 1.0.11, jsrsasign 6.1.1 (2016-Sep-25).\n * @see KJUR.asn1.DERAbstractString - superclass\n * @example\n * // default constructor\n * o = new KJUR.asn1.DEROctetString();\n * // initialize with string\n * o = new KJUR.asn1.DEROctetString({str: \"aaa\"});\n * // initialize with hexadecimal string\n * o = new KJUR.asn1.DEROctetString({hex: \"616161\"});\n * // initialize with ASN1Util.newObject argument\n * o = new KJUR.asn1.DEROctetString({obj: {seq: [{int: 3}, {prnstr: 'aaa'}]}});\n * // above generates a ASN.1 data like this:\n * // OCTET STRING, encapsulates {\n * //   SEQUENCE {\n * //     INTEGER 3\n * //     PrintableString 'aaa'\n * //     }\n * //   }\n */\nKJUR.asn1.DEROctetString = function (params) {\n    if (params !== undefined && typeof params.obj !== \"undefined\") {\n        var o = KJUR.asn1.ASN1Util.newObject(params.obj);\n        params.hex = o.getEncodedHex();\n    }\n    KJUR.asn1.DEROctetString.superclass.constructor.call(this, params);\n    this.hT = \"04\";\n};\nYAHOO.lang.extend(KJUR.asn1.DEROctetString, KJUR.asn1.DERAbstractString);\n// ********************************************************************\n/**\n * class for ASN.1 DER Null\n * @name KJUR.asn1.DERNull\n * @class class for ASN.1 DER Null\n * @extends KJUR.asn1.ASN1Object\n * @description\n * @see KJUR.asn1.ASN1Object - superclass\n */\nKJUR.asn1.DERNull = function () {\n    KJUR.asn1.DERNull.superclass.constructor.call(this);\n    this.hT = \"05\";\n    this.hTLV = \"0500\";\n};\nYAHOO.lang.extend(KJUR.asn1.DERNull, KJUR.asn1.ASN1Object);\n// ********************************************************************\n/**\n * class for ASN.1 DER ObjectIdentifier\n * @name KJUR.asn1.DERObjectIdentifier\n * @class class for ASN.1 DER ObjectIdentifier\n * @param {Array} params associative array of parameters (ex. {'oid': '2.5.4.5'})\n * @extends KJUR.asn1.ASN1Object\n * @description\n * <br/>\n * As for argument 'params' for constructor, you can specify one of\n * following properties:\n * <ul>\n * <li>oid - specify initial ASN.1 value(V) by a oid string (ex. 2.5.4.13)</li>\n * <li>hex - specify initial ASN.1 value(V) by a hexadecimal string</li>\n * </ul>\n * NOTE: 'params' can be omitted.\n */\nKJUR.asn1.DERObjectIdentifier = function (params) {\n    var itox = function (i) {\n        var h = i.toString(16);\n        if (h.length == 1)\n            h = '0' + h;\n        return h;\n    };\n    var roidtox = function (roid) {\n        var h = '';\n        var bi = new BigInteger(roid, 10);\n        var b = bi.toString(2);\n        var padLen = 7 - b.length % 7;\n        if (padLen == 7)\n            padLen = 0;\n        var bPad = '';\n        for (var i = 0; i < padLen; i++)\n            bPad += '0';\n        b = bPad + b;\n        for (var i = 0; i < b.length - 1; i += 7) {\n            var b8 = b.substr(i, 7);\n            if (i != b.length - 7)\n                b8 = '1' + b8;\n            h += itox(parseInt(b8, 2));\n        }\n        return h;\n    };\n    KJUR.asn1.DERObjectIdentifier.superclass.constructor.call(this);\n    this.hT = \"06\";\n    /**\n     * set value by a hexadecimal string\n     * @name setValueHex\n     * @memberOf KJUR.asn1.DERObjectIdentifier#\n     * @function\n     * @param {String} newHexString hexadecimal value of OID bytes\n     */\n    this.setValueHex = function (newHexString) {\n        this.hTLV = null;\n        this.isModified = true;\n        this.s = null;\n        this.hV = newHexString;\n    };\n    /**\n     * set value by a OID string<br/>\n     * @name setValueOidString\n     * @memberOf KJUR.asn1.DERObjectIdentifier#\n     * @function\n     * @param {String} oidString OID string (ex. 2.5.4.13)\n     * @example\n     * o = new KJUR.asn1.DERObjectIdentifier();\n     * o.setValueOidString(\"2.5.4.13\");\n     */\n    this.setValueOidString = function (oidString) {\n        if (!oidString.match(/^[0-9.]+$/)) {\n            throw \"malformed oid string: \" + oidString;\n        }\n        var h = '';\n        var a = oidString.split('.');\n        var i0 = parseInt(a[0]) * 40 + parseInt(a[1]);\n        h += itox(i0);\n        a.splice(0, 2);\n        for (var i = 0; i < a.length; i++) {\n            h += roidtox(a[i]);\n        }\n        this.hTLV = null;\n        this.isModified = true;\n        this.s = null;\n        this.hV = h;\n    };\n    /**\n     * set value by a OID name\n     * @name setValueName\n     * @memberOf KJUR.asn1.DERObjectIdentifier#\n     * @function\n     * @param {String} oidName OID name (ex. 'serverAuth')\n     * @since 1.0.1\n     * @description\n     * OID name shall be defined in 'KJUR.asn1.x509.OID.name2oidList'.\n     * Otherwise raise error.\n     * @example\n     * o = new KJUR.asn1.DERObjectIdentifier();\n     * o.setValueName(\"serverAuth\");\n     */\n    this.setValueName = function (oidName) {\n        var oid = KJUR.asn1.x509.OID.name2oid(oidName);\n        if (oid !== '') {\n            this.setValueOidString(oid);\n        }\n        else {\n            throw \"DERObjectIdentifier oidName undefined: \" + oidName;\n        }\n    };\n    this.getFreshValueHex = function () {\n        return this.hV;\n    };\n    if (params !== undefined) {\n        if (typeof params === \"string\") {\n            if (params.match(/^[0-2].[0-9.]+$/)) {\n                this.setValueOidString(params);\n            }\n            else {\n                this.setValueName(params);\n            }\n        }\n        else if (params.oid !== undefined) {\n            this.setValueOidString(params.oid);\n        }\n        else if (params.hex !== undefined) {\n            this.setValueHex(params.hex);\n        }\n        else if (params.name !== undefined) {\n            this.setValueName(params.name);\n        }\n    }\n};\nYAHOO.lang.extend(KJUR.asn1.DERObjectIdentifier, KJUR.asn1.ASN1Object);\n// ********************************************************************\n/**\n * class for ASN.1 DER Enumerated\n * @name KJUR.asn1.DEREnumerated\n * @class class for ASN.1 DER Enumerated\n * @extends KJUR.asn1.ASN1Object\n * @description\n * <br/>\n * As for argument 'params' for constructor, you can specify one of\n * following properties:\n * <ul>\n * <li>int - specify initial ASN.1 value(V) by integer value</li>\n * <li>hex - specify initial ASN.1 value(V) by a hexadecimal string</li>\n * </ul>\n * NOTE: 'params' can be omitted.\n * @example\n * new KJUR.asn1.DEREnumerated(123);\n * new KJUR.asn1.DEREnumerated({int: 123});\n * new KJUR.asn1.DEREnumerated({hex: '1fad'});\n */\nKJUR.asn1.DEREnumerated = function (params) {\n    KJUR.asn1.DEREnumerated.superclass.constructor.call(this);\n    this.hT = \"0a\";\n    /**\n     * set value by Tom Wu's BigInteger object\n     * @name setByBigInteger\n     * @memberOf KJUR.asn1.DEREnumerated#\n     * @function\n     * @param {BigInteger} bigIntegerValue to set\n     */\n    this.setByBigInteger = function (bigIntegerValue) {\n        this.hTLV = null;\n        this.isModified = true;\n        this.hV = KJUR.asn1.ASN1Util.bigIntToMinTwosComplementsHex(bigIntegerValue);\n    };\n    /**\n     * set value by integer value\n     * @name setByInteger\n     * @memberOf KJUR.asn1.DEREnumerated#\n     * @function\n     * @param {Integer} integer value to set\n     */\n    this.setByInteger = function (intValue) {\n        var bi = new BigInteger(String(intValue), 10);\n        this.setByBigInteger(bi);\n    };\n    /**\n     * set value by integer value\n     * @name setValueHex\n     * @memberOf KJUR.asn1.DEREnumerated#\n     * @function\n     * @param {String} hexadecimal string of integer value\n     * @description\n     * <br/>\n     * NOTE: Value shall be represented by minimum octet length of\n     * two's complement representation.\n     */\n    this.setValueHex = function (newHexString) {\n        this.hV = newHexString;\n    };\n    this.getFreshValueHex = function () {\n        return this.hV;\n    };\n    if (typeof params != \"undefined\") {\n        if (typeof params['int'] != \"undefined\") {\n            this.setByInteger(params['int']);\n        }\n        else if (typeof params == \"number\") {\n            this.setByInteger(params);\n        }\n        else if (typeof params['hex'] != \"undefined\") {\n            this.setValueHex(params['hex']);\n        }\n    }\n};\nYAHOO.lang.extend(KJUR.asn1.DEREnumerated, KJUR.asn1.ASN1Object);\n// ********************************************************************\n/**\n * class for ASN.1 DER UTF8String\n * @name KJUR.asn1.DERUTF8String\n * @class class for ASN.1 DER UTF8String\n * @param {Array} params associative array of parameters (ex. {'str': 'aaa'})\n * @extends KJUR.asn1.DERAbstractString\n * @description\n * @see KJUR.asn1.DERAbstractString - superclass\n */\nKJUR.asn1.DERUTF8String = function (params) {\n    KJUR.asn1.DERUTF8String.superclass.constructor.call(this, params);\n    this.hT = \"0c\";\n};\nYAHOO.lang.extend(KJUR.asn1.DERUTF8String, KJUR.asn1.DERAbstractString);\n// ********************************************************************\n/**\n * class for ASN.1 DER NumericString\n * @name KJUR.asn1.DERNumericString\n * @class class for ASN.1 DER NumericString\n * @param {Array} params associative array of parameters (ex. {'str': 'aaa'})\n * @extends KJUR.asn1.DERAbstractString\n * @description\n * @see KJUR.asn1.DERAbstractString - superclass\n */\nKJUR.asn1.DERNumericString = function (params) {\n    KJUR.asn1.DERNumericString.superclass.constructor.call(this, params);\n    this.hT = \"12\";\n};\nYAHOO.lang.extend(KJUR.asn1.DERNumericString, KJUR.asn1.DERAbstractString);\n// ********************************************************************\n/**\n * class for ASN.1 DER PrintableString\n * @name KJUR.asn1.DERPrintableString\n * @class class for ASN.1 DER PrintableString\n * @param {Array} params associative array of parameters (ex. {'str': 'aaa'})\n * @extends KJUR.asn1.DERAbstractString\n * @description\n * @see KJUR.asn1.DERAbstractString - superclass\n */\nKJUR.asn1.DERPrintableString = function (params) {\n    KJUR.asn1.DERPrintableString.superclass.constructor.call(this, params);\n    this.hT = \"13\";\n};\nYAHOO.lang.extend(KJUR.asn1.DERPrintableString, KJUR.asn1.DERAbstractString);\n// ********************************************************************\n/**\n * class for ASN.1 DER TeletexString\n * @name KJUR.asn1.DERTeletexString\n * @class class for ASN.1 DER TeletexString\n * @param {Array} params associative array of parameters (ex. {'str': 'aaa'})\n * @extends KJUR.asn1.DERAbstractString\n * @description\n * @see KJUR.asn1.DERAbstractString - superclass\n */\nKJUR.asn1.DERTeletexString = function (params) {\n    KJUR.asn1.DERTeletexString.superclass.constructor.call(this, params);\n    this.hT = \"14\";\n};\nYAHOO.lang.extend(KJUR.asn1.DERTeletexString, KJUR.asn1.DERAbstractString);\n// ********************************************************************\n/**\n * class for ASN.1 DER IA5String\n * @name KJUR.asn1.DERIA5String\n * @class class for ASN.1 DER IA5String\n * @param {Array} params associative array of parameters (ex. {'str': 'aaa'})\n * @extends KJUR.asn1.DERAbstractString\n * @description\n * @see KJUR.asn1.DERAbstractString - superclass\n */\nKJUR.asn1.DERIA5String = function (params) {\n    KJUR.asn1.DERIA5String.superclass.constructor.call(this, params);\n    this.hT = \"16\";\n};\nYAHOO.lang.extend(KJUR.asn1.DERIA5String, KJUR.asn1.DERAbstractString);\n// ********************************************************************\n/**\n * class for ASN.1 DER UTCTime\n * @name KJUR.asn1.DERUTCTime\n * @class class for ASN.1 DER UTCTime\n * @param {Array} params associative array of parameters (ex. {'str': '130430235959Z'})\n * @extends KJUR.asn1.DERAbstractTime\n * @description\n * <br/>\n * As for argument 'params' for constructor, you can specify one of\n * following properties:\n * <ul>\n * <li>str - specify initial ASN.1 value(V) by a string (ex.'130430235959Z')</li>\n * <li>hex - specify initial ASN.1 value(V) by a hexadecimal string</li>\n * <li>date - specify Date object.</li>\n * </ul>\n * NOTE: 'params' can be omitted.\n * <h4>EXAMPLES</h4>\n * @example\n * d1 = new KJUR.asn1.DERUTCTime();\n * d1.setString('130430125959Z');\n *\n * d2 = new KJUR.asn1.DERUTCTime({'str': '130430125959Z'});\n * d3 = new KJUR.asn1.DERUTCTime({'date': new Date(Date.UTC(2015, 0, 31, 0, 0, 0, 0))});\n * d4 = new KJUR.asn1.DERUTCTime('130430125959Z');\n */\nKJUR.asn1.DERUTCTime = function (params) {\n    KJUR.asn1.DERUTCTime.superclass.constructor.call(this, params);\n    this.hT = \"17\";\n    /**\n     * set value by a Date object<br/>\n     * @name setByDate\n     * @memberOf KJUR.asn1.DERUTCTime#\n     * @function\n     * @param {Date} dateObject Date object to set ASN.1 value(V)\n     * @example\n     * o = new KJUR.asn1.DERUTCTime();\n     * o.setByDate(new Date(\"2016/12/31\"));\n     */\n    this.setByDate = function (dateObject) {\n        this.hTLV = null;\n        this.isModified = true;\n        this.date = dateObject;\n        this.s = this.formatDate(this.date, 'utc');\n        this.hV = stohex(this.s);\n    };\n    this.getFreshValueHex = function () {\n        if (typeof this.date == \"undefined\" && typeof this.s == \"undefined\") {\n            this.date = new Date();\n            this.s = this.formatDate(this.date, 'utc');\n            this.hV = stohex(this.s);\n        }\n        return this.hV;\n    };\n    if (params !== undefined) {\n        if (params.str !== undefined) {\n            this.setString(params.str);\n        }\n        else if (typeof params == \"string\" && params.match(/^[0-9]{12}Z$/)) {\n            this.setString(params);\n        }\n        else if (params.hex !== undefined) {\n            this.setStringHex(params.hex);\n        }\n        else if (params.date !== undefined) {\n            this.setByDate(params.date);\n        }\n    }\n};\nYAHOO.lang.extend(KJUR.asn1.DERUTCTime, KJUR.asn1.DERAbstractTime);\n// ********************************************************************\n/**\n * class for ASN.1 DER GeneralizedTime\n * @name KJUR.asn1.DERGeneralizedTime\n * @class class for ASN.1 DER GeneralizedTime\n * @param {Array} params associative array of parameters (ex. {'str': '20130430235959Z'})\n * @property {Boolean} withMillis flag to show milliseconds or not\n * @extends KJUR.asn1.DERAbstractTime\n * @description\n * <br/>\n * As for argument 'params' for constructor, you can specify one of\n * following properties:\n * <ul>\n * <li>str - specify initial ASN.1 value(V) by a string (ex.'20130430235959Z')</li>\n * <li>hex - specify initial ASN.1 value(V) by a hexadecimal string</li>\n * <li>date - specify Date object.</li>\n * <li>millis - specify flag to show milliseconds (from 1.0.6)</li>\n * </ul>\n * NOTE1: 'params' can be omitted.\n * NOTE2: 'withMillis' property is supported from asn1 1.0.6.\n */\nKJUR.asn1.DERGeneralizedTime = function (params) {\n    KJUR.asn1.DERGeneralizedTime.superclass.constructor.call(this, params);\n    this.hT = \"18\";\n    this.withMillis = false;\n    /**\n     * set value by a Date object\n     * @name setByDate\n     * @memberOf KJUR.asn1.DERGeneralizedTime#\n     * @function\n     * @param {Date} dateObject Date object to set ASN.1 value(V)\n     * @example\n     * When you specify UTC time, use 'Date.UTC' method like this:<br/>\n     * o1 = new DERUTCTime();\n     * o1.setByDate(date);\n     *\n     * date = new Date(Date.UTC(2015, 0, 31, 23, 59, 59, 0)); #2015JAN31 23:59:59\n     */\n    this.setByDate = function (dateObject) {\n        this.hTLV = null;\n        this.isModified = true;\n        this.date = dateObject;\n        this.s = this.formatDate(this.date, 'gen', this.withMillis);\n        this.hV = stohex(this.s);\n    };\n    this.getFreshValueHex = function () {\n        if (this.date === undefined && this.s === undefined) {\n            this.date = new Date();\n            this.s = this.formatDate(this.date, 'gen', this.withMillis);\n            this.hV = stohex(this.s);\n        }\n        return this.hV;\n    };\n    if (params !== undefined) {\n        if (params.str !== undefined) {\n            this.setString(params.str);\n        }\n        else if (typeof params == \"string\" && params.match(/^[0-9]{14}Z$/)) {\n            this.setString(params);\n        }\n        else if (params.hex !== undefined) {\n            this.setStringHex(params.hex);\n        }\n        else if (params.date !== undefined) {\n            this.setByDate(params.date);\n        }\n        if (params.millis === true) {\n            this.withMillis = true;\n        }\n    }\n};\nYAHOO.lang.extend(KJUR.asn1.DERGeneralizedTime, KJUR.asn1.DERAbstractTime);\n// ********************************************************************\n/**\n * class for ASN.1 DER Sequence\n * @name KJUR.asn1.DERSequence\n * @class class for ASN.1 DER Sequence\n * @extends KJUR.asn1.DERAbstractStructured\n * @description\n * <br/>\n * As for argument 'params' for constructor, you can specify one of\n * following properties:\n * <ul>\n * <li>array - specify array of ASN1Object to set elements of content</li>\n * </ul>\n * NOTE: 'params' can be omitted.\n */\nKJUR.asn1.DERSequence = function (params) {\n    KJUR.asn1.DERSequence.superclass.constructor.call(this, params);\n    this.hT = \"30\";\n    this.getFreshValueHex = function () {\n        var h = '';\n        for (var i = 0; i < this.asn1Array.length; i++) {\n            var asn1Obj = this.asn1Array[i];\n            h += asn1Obj.getEncodedHex();\n        }\n        this.hV = h;\n        return this.hV;\n    };\n};\nYAHOO.lang.extend(KJUR.asn1.DERSequence, KJUR.asn1.DERAbstractStructured);\n// ********************************************************************\n/**\n * class for ASN.1 DER Set\n * @name KJUR.asn1.DERSet\n * @class class for ASN.1 DER Set\n * @extends KJUR.asn1.DERAbstractStructured\n * @description\n * <br/>\n * As for argument 'params' for constructor, you can specify one of\n * following properties:\n * <ul>\n * <li>array - specify array of ASN1Object to set elements of content</li>\n * <li>sortflag - flag for sort (default: true). ASN.1 BER is not sorted in 'SET OF'.</li>\n * </ul>\n * NOTE1: 'params' can be omitted.<br/>\n * NOTE2: sortflag is supported since 1.0.5.\n */\nKJUR.asn1.DERSet = function (params) {\n    KJUR.asn1.DERSet.superclass.constructor.call(this, params);\n    this.hT = \"31\";\n    this.sortFlag = true; // item shall be sorted only in ASN.1 DER\n    this.getFreshValueHex = function () {\n        var a = new Array();\n        for (var i = 0; i < this.asn1Array.length; i++) {\n            var asn1Obj = this.asn1Array[i];\n            a.push(asn1Obj.getEncodedHex());\n        }\n        if (this.sortFlag == true)\n            a.sort();\n        this.hV = a.join('');\n        return this.hV;\n    };\n    if (typeof params != \"undefined\") {\n        if (typeof params.sortflag != \"undefined\" &&\n            params.sortflag == false)\n            this.sortFlag = false;\n    }\n};\nYAHOO.lang.extend(KJUR.asn1.DERSet, KJUR.asn1.DERAbstractStructured);\n// ********************************************************************\n/**\n * class for ASN.1 DER TaggedObject\n * @name KJUR.asn1.DERTaggedObject\n * @class class for ASN.1 DER TaggedObject\n * @extends KJUR.asn1.ASN1Object\n * @description\n * <br/>\n * Parameter 'tagNoNex' is ASN.1 tag(T) value for this object.\n * For example, if you find '[1]' tag in a ASN.1 dump,\n * 'tagNoHex' will be 'a1'.\n * <br/>\n * As for optional argument 'params' for constructor, you can specify *ANY* of\n * following properties:\n * <ul>\n * <li>explicit - specify true if this is explicit tag otherwise false\n *     (default is 'true').</li>\n * <li>tag - specify tag (default is 'a0' which means [0])</li>\n * <li>obj - specify ASN1Object which is tagged</li>\n * </ul>\n * @example\n * d1 = new KJUR.asn1.DERUTF8String({'str':'a'});\n * d2 = new KJUR.asn1.DERTaggedObject({'obj': d1});\n * hex = d2.getEncodedHex();\n */\nKJUR.asn1.DERTaggedObject = function (params) {\n    KJUR.asn1.DERTaggedObject.superclass.constructor.call(this);\n    this.hT = \"a0\";\n    this.hV = '';\n    this.isExplicit = true;\n    this.asn1Object = null;\n    /**\n     * set value by an ASN1Object\n     * @name setString\n     * @memberOf KJUR.asn1.DERTaggedObject#\n     * @function\n     * @param {Boolean} isExplicitFlag flag for explicit/implicit tag\n     * @param {Integer} tagNoHex hexadecimal string of ASN.1 tag\n     * @param {ASN1Object} asn1Object ASN.1 to encapsulate\n     */\n    this.setASN1Object = function (isExplicitFlag, tagNoHex, asn1Object) {\n        this.hT = tagNoHex;\n        this.isExplicit = isExplicitFlag;\n        this.asn1Object = asn1Object;\n        if (this.isExplicit) {\n            this.hV = this.asn1Object.getEncodedHex();\n            this.hTLV = null;\n            this.isModified = true;\n        }\n        else {\n            this.hV = null;\n            this.hTLV = asn1Object.getEncodedHex();\n            this.hTLV = this.hTLV.replace(/^../, tagNoHex);\n            this.isModified = false;\n        }\n    };\n    this.getFreshValueHex = function () {\n        return this.hV;\n    };\n    if (typeof params != \"undefined\") {\n        if (typeof params['tag'] != \"undefined\") {\n            this.hT = params['tag'];\n        }\n        if (typeof params['explicit'] != \"undefined\") {\n            this.isExplicit = params['explicit'];\n        }\n        if (typeof params['obj'] != \"undefined\") {\n            this.asn1Object = params['obj'];\n            this.setASN1Object(this.isExplicit, this.hT, this.asn1Object);\n        }\n    }\n};\nYAHOO.lang.extend(KJUR.asn1.DERTaggedObject, KJUR.asn1.ASN1Object);\n"]},"metadata":{},"sourceType":"module"}